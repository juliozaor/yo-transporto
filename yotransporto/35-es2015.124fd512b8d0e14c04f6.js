(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"6RBR":function(o,t,e){"use strict";e.r(t),e.d(t,"VerOfertaConductorPageModule",(function(){return j}));var a=e("ofXK"),i=e("3Pt+"),c=e("TEn/"),r=e("tyNb"),n=e("mrSG"),b=e("ZJfK"),s=e("fXoL"),l=e("IbGY"),d=e("on2l"),f=e("H+l1");function u(o,t){1&o&&(s.Nb(0,"h4"),s.mc(1,"Ciudad"),s.Mb())}function h(o,t){1&o&&(s.Nb(0,"h4"),s.mc(1,"Interurbano"),s.Mb())}function M(o,t){1&o&&(s.Nb(0,"h4"),s.mc(1,"Domicilio"),s.Mb())}function N(o,t){1&o&&(s.Nb(0,"h4"),s.mc(1,"Mercancia"),s.Mb())}function p(o,t){if(1&o&&(s.Nb(0,"ion-row"),s.Nb(1,"ion-col",9),s.Nb(2,"ion-text",8),s.Nb(3,"h3"),s.mc(4,"Comentarios: "),s.Mb(),s.Mb(),s.Mb(),s.Nb(5,"ion-col",9),s.Nb(6,"ion-text"),s.Nb(7,"p"),s.mc(8),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&o){const o=s.Xb(2);s.Ab(8),s.nc(o.oferta.comentarios)}}function m(o,t){if(1&o){const o=s.Ob();s.Nb(0,"ion-col",15),s.Nb(1,"ion-chip",17),s.Vb("click",(function(){s.ic(o);const t=s.Xb().$implicit;return s.Xb(2).chatear(t)})),s.Nb(2,"ion-label"),s.mc(3,"Chat"),s.Mb(),s.Mb(),s.Mb()}}function g(o,t){if(1&o){const o=s.Ob();s.Nb(0,"ion-col",15),s.Nb(1,"ion-chip",17),s.Vb("click",(function(){s.ic(o);const t=s.Xb().$implicit;return s.Xb(2).aceptar(t.codOfertaConductor,t.idSignal)})),s.Nb(2,"ion-label"),s.mc(3,"Aceptar"),s.Mb(),s.Mb(),s.Mb()}}function C(o,t){if(1&o){const o=s.Ob();s.Nb(0,"ion-col",15),s.Nb(1,"ion-chip",18),s.Vb("click",(function(){s.ic(o);const t=s.Xb(),e=t.$implicit,a=t.index;return s.Xb(2).rechazar(e.codOfertaConductor,a)})),s.Nb(2,"ion-label"),s.mc(3,"Rechazar"),s.Mb(),s.Mb(),s.Mb()}}function O(o,t){if(1&o&&(s.Nb(0,"ion-row",14),s.Nb(1,"ion-col",15),s.Nb(2,"ion-label"),s.Nb(3,"p"),s.mc(4),s.Mb(),s.Nb(5,"p"),s.mc(6),s.Mb(),s.Mb(),s.Mb(),s.lc(7,m,4,0,"ion-col",16),s.lc(8,g,4,0,"ion-col",16),s.lc(9,C,4,0,"ion-col",16),s.Mb()),2&o){const o=t.$implicit,e=s.Xb(2);s.Ab(4),s.nc(o.nombre),s.Ab(2),s.nc(o.valor),s.Ab(1),s.cc("ngIf",1==e.habilitarChat),s.Ab(1),s.cc("ngIf",0==e.habilitarChat),s.Ab(1),s.cc("ngIf",1==e.habilitarRechazar)}}function v(o,t){if(1&o){const o=s.Ob();s.Nb(0,"ion-grid",6),s.Nb(1,"ion-row"),s.Nb(2,"ion-col",7),s.Nb(3,"ion-text"),s.Nb(4,"h3"),s.Nb(5,"ion-label",8),s.mc(6,"Origen:"),s.Mb(),s.mc(7),s.Mb(),s.Nb(8,"h3"),s.Nb(9,"ion-label",8),s.mc(10,"Destino:"),s.Mb(),s.mc(11),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(12,"ion-row"),s.Nb(13,"ion-col",9),s.Nb(14,"ion-text",8),s.Nb(15,"h3"),s.mc(16,"Tipo de servicio: "),s.Mb(),s.Mb(),s.Mb(),s.Nb(17,"ion-col",9),s.Nb(18,"ion-text"),s.lc(19,u,2,0,"h4",10),s.lc(20,h,2,0,"h4",10),s.lc(21,M,2,0,"h4",10),s.lc(22,N,2,0,"h4",10),s.Mb(),s.Mb(),s.Mb(),s.Nb(23,"ion-row"),s.Nb(24,"ion-col",7),s.Nb(25,"ion-text"),s.Nb(26,"h3"),s.Nb(27,"ion-label",8),s.mc(28,"Fecha de salida:"),s.Mb(),s.mc(29),s.Mb(),s.Nb(30,"h3"),s.Nb(31,"ion-label",8),s.mc(32,"Hora de salida:"),s.Mb(),s.mc(33),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(34,"ion-row"),s.Nb(35,"ion-col",9),s.Nb(36,"ion-text"),s.Nb(37,"h3"),s.Nb(38,"ion-label",8),s.mc(39,"Capacidad de carga:"),s.Mb(),s.Mb(),s.Nb(40,"p"),s.mc(41),s.Mb(),s.Mb(),s.Mb(),s.Nb(42,"ion-col",9),s.Nb(43,"ion-text"),s.Nb(44,"h3"),s.Nb(45,"ion-label",8),s.mc(46,"Cupo para pasajeros:"),s.Mb(),s.Mb(),s.Nb(47,"p"),s.mc(48),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(49,"ion-row"),s.Nb(50,"ion-col",7),s.Nb(51,"ion-text"),s.Nb(52,"h3"),s.Nb(53,"ion-label",8),s.mc(54,"paqueteria::"),s.Mb(),s.mc(55),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.lc(56,p,9,1,"ion-row",10),s.Nb(57,"ion-row"),s.Nb(58,"ion-col",11),s.Nb(59,"ion-text",8),s.Nb(60,"h1"),s.mc(61),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(62,"ion-grid"),s.Nb(63,"ion-row"),s.Nb(64,"ion-col",7),s.Nb(65,"ion-label"),s.Nb(66,"h1"),s.mc(67,"Pasajeros que aceptaron la oferta"),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.lc(68,O,10,5,"ion-row",12),s.Mb(),s.Nb(69,"ion-row"),s.Nb(70,"ion-col",7),s.Nb(71,"ion-button",13),s.Vb("click",(function(){return s.ic(o),s.Xb().finalizarOferta()})),s.mc(72," Finalizar Oferta "),s.Mb(),s.Mb(),s.Mb(),s.Mb()}if(2&o){const o=s.Xb();s.Ab(7),s.oc(" ",o.oferta.origen,""),s.Ab(4),s.oc(" ",o.oferta.destino,""),s.Ab(8),s.cc("ngIf","1"==o.oferta.codTipoServicio),s.Ab(1),s.cc("ngIf","2"==o.oferta.codTipoServicio),s.Ab(1),s.cc("ngIf","3"==o.oferta.codTipoServicio),s.Ab(1),s.cc("ngIf","4"==o.oferta.codTipoServicio),s.Ab(7),s.oc(" ",o.oferta.fecha_salida,""),s.Ab(4),s.oc(" ",o.oferta.hora_salida,""),s.Ab(8),s.nc(o.oferta.capacidadCarga),s.Ab(7),s.nc(o.oferta.cantPasajeros),s.Ab(7),s.oc(" ",o.oferta.paqueteriaMensajeria,""),s.Ab(1),s.cc("ngIf",""!=o.oferta.comentarios),s.Ab(5),s.oc("$",o.oferta.tarifa,""),s.Ab(7),s.cc("ngForOf",o.pasajeros)}}const A=[{path:"",component:(()=>{class o{constructor(o,t,e,a,i,c,r){this.conductorService=o,this.usuarioService=t,this.navCtrl=e,this.modalCtrl=a,this.alertController=i,this.actionSheetCtrl=c,this.push=r,this.ofertasAceptadas=[],this.pasajeros=[],this.habilitarChat=!1,this.habilitarRechazar=!0}ngOnInit(){this.cargarDatos()}cargarDatos(){return Object(n.__awaiter)(this,void 0,void 0,(function*(){this.oferta=yield this.conductorService.ofertaConductor,this.conductorService.buscarOfertasAceptadas(this.oferta.idOfertaConductor).subscribe(o=>{this.ofertasAceptadas=o.ofertas,this.ofertasAceptadas.forEach(o=>{this.usuarioService.datosUsuario(o.codPasajero).subscribe(t=>{const e={nombre:t.usuario.nombre,codOfertaConductor:o.idPasajeroOfertaConductor,valor:o.valor,aceptada:o.aceptada,idSignal:t.usuario.idSignal};this.habilitarChat=o.aceptada,this.pasajeros.push(e)})})})}))}chatear(o){return Object(n.__awaiter)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:b.a,componentProps:{idOferta:o.codOfertaConductor,nombre:o.nombre}});yield t.present()}))}aceptar(o,t){return Object(n.__awaiter)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({message:"Esta seguro que desea aceptar este pasajero?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:e=>Object(n.__awaiter)(this,void 0,void 0,(function*(){if(this.conductorService.actualizarPasajeroOfertaConductor(o,{estado:!1,aceptada:!0})){this.habilitarChat=!0,this.habilitarRechazar=!1;const o={oferta:this.oferta,lugar:"aceptar pasajero"},e=(JSON.stringify({mensaje:"El conductor aceptado su oferta",titulo:"Oferta Aceptada",idSignal:t}),JSON.stringify(o));console.log(e)}}))}]});yield e.present()}))}rechazar(o,t){return Object(n.__awaiter)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({message:"Esta seguro que desea rechazar este usuario?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:e=>Object(n.__awaiter)(this,void 0,void 0,(function*(){this.conductorService.actualizarPasajeroOfertaConductor(o,{estado:!0,aceptada:!1})&&this.ofertasAceptadas.splice(t,1)}))}]});yield e.present()}))}finalizarOferta(){return Object(n.__awaiter)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({message:"Esta seguro que desea terminar esta oferta?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:o=>Object(n.__awaiter)(this,void 0,void 0,(function*(){this.conductorService.terminarOferta(this.oferta.idOfertaConductor)&&this.navCtrl.navigateRoot("/conductor",{animated:!0})}))}]});yield o.present()}))}}return o.\u0275fac=function(t){return new(t||o)(s.Kb(l.a),s.Kb(d.a),s.Kb(c.bb),s.Kb(c.ab),s.Kb(c.b),s.Kb(c.a),s.Kb(f.a))},o.\u0275cmp=s.Eb({type:o,selectors:[["app-ver-oferta-conductor"]],decls:10,vars:1,consts:[["color","#f77708"],["slot","start"],["defaultHref","/conductor"],["slot","end",1,"imagenIco"],["src","./assets/imagenes/logo1.png"],["fixed","",4,"ngIf"],["fixed",""],["size","12"],["color","secondary"],["size","6"],[4,"ngIf"],["size","12",1,"aling-center"],["class","border",4,"ngFor","ngForOf"],["fill","outline","expand","full","shape","round",3,"click"],[1,"border"],["size","4"],["size","4",4,"ngIf"],["color","dark","mode","ios","outline","false",1,"color-blue",3,"click"],["color","dark","mode","ios","outline","false",1,"color-red",3,"click"]],template:function(o,t){1&o&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar",0),s.Nb(2,"ion-buttons",1),s.Lb(3,"ion-back-button",2),s.Mb(),s.Nb(4,"ion-title"),s.mc(5,"Ver oferta"),s.Mb(),s.Nb(6,"ion-buttons",3),s.Lb(7,"img",4),s.Mb(),s.Mb(),s.Mb(),s.Nb(8,"ion-content"),s.lc(9,v,73,14,"ion-grid",5),s.Mb()),2&o&&(s.Ab(9),s.cc("ngIf",t.oferta))},directives:[c.q,c.W,c.i,c.f,c.g,c.V,c.n,a.k,c.p,c.K,c.m,c.U,c.A,a.j,c.h,c.l],styles:[".bgcolor[_ngcontent-%COMP%]{background:#ccd1e0}.border[_ngcontent-%COMP%]{border:1px solid #4d4f50}ion-chip[_ngcontent-%COMP%]{background:#795df1}.color-blue[_ngcontent-%COMP%]{background:rgba(61,250,77,.69)}.color-red[_ngcontent-%COMP%]{background:rgba(255,4,4,.55)}"]}),o})()}];let w=(()=>{class o{}return o.\u0275mod=s.Ib({type:o}),o.\u0275inj=s.Hb({factory:function(t){return new(t||o)},imports:[[r.i.forChild(A)],r.i]}),o})(),j=(()=>{class o{}return o.\u0275mod=s.Ib({type:o}),o.\u0275inj=s.Hb({factory:function(t){return new(t||o)},imports:[[a.c,i.a,c.X,w]]}),o})()}}]);