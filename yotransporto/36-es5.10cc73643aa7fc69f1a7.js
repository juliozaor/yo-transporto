function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{qs0g:function(e,t,r){"use strict";r.r(t),r.d(t,"VerOfertaPasajeroPageModule",(function(){return E}));var o=r("ofXK"),n=r("3Pt+"),a=r("TEn/"),i=r("tyNb"),c=r("mrSG"),b=r("ZJfK"),s=r("6gyQ"),u=r("fXoL"),l=r("on2l"),f=r("H+l1");function d(e,t){1&e&&(u.Nb(0,"h4"),u.mc(1,"Ciudad"),u.Mb())}function h(e,t){1&e&&(u.Nb(0,"h4"),u.mc(1,"Interurbano"),u.Mb())}function p(e,t){1&e&&(u.Nb(0,"h4"),u.mc(1,"Domicilio"),u.Mb())}function m(e,t){1&e&&(u.Nb(0,"h4"),u.mc(1,"Mercancia"),u.Mb())}function M(e,t){if(1&e&&(u.Nb(0,"ion-row"),u.Nb(1,"ion-col",9),u.Nb(2,"ion-text",8),u.Nb(3,"h4"),u.mc(4,"Recoger en el horario: "),u.Mb(),u.Mb(),u.Mb(),u.Nb(5,"ion-col",9),u.Nb(6,"ion-text"),u.Nb(7,"h4"),u.mc(8),u.Mb(),u.Mb(),u.Mb(),u.Mb()),2&e){var r=u.Xb(2);u.Ab(8),u.pc("",r.oferta.horaInicial," - ",r.oferta.horaFinal,"")}}function g(e,t){if(1&e&&(u.Nb(0,"ion-row"),u.Nb(1,"ion-col",9),u.Nb(2,"ion-text",8),u.Nb(3,"h4"),u.mc(4,"Fecha: "),u.Mb(),u.Mb(),u.Mb(),u.Nb(5,"ion-col",9),u.Nb(6,"ion-text"),u.Nb(7,"h4"),u.mc(8),u.Mb(),u.Mb(),u.Mb(),u.Mb()),2&e){var r=u.Xb(2);u.Ab(8),u.nc(r.oferta.fecha)}}function N(e,t){1&e&&(u.Nb(0,"p"),u.Lb(1,"ion-icon",14),u.mc(2,"Aire acondicionado"),u.Mb())}function v(e,t){1&e&&(u.Nb(0,"p"),u.Lb(1,"ion-icon",14),u.mc(2,"Musica"),u.Mb())}function w(e,t){1&e&&(u.Nb(0,"p"),u.Lb(1,"ion-icon",14),u.mc(2,"Asientos para Bebe"),u.Mb())}function C(e,t){1&e&&(u.Nb(0,"p"),u.Lb(1,"ion-icon",14),u.mc(2,"Maletero"),u.Mb())}function x(e,t){if(1&e&&(u.Nb(0,"ion-row"),u.Nb(1,"ion-col",9),u.Nb(2,"ion-text",8),u.Nb(3,"h3"),u.mc(4,"Requiero: "),u.Mb(),u.Mb(),u.Mb(),u.Nb(5,"ion-col",9),u.Nb(6,"ion-text"),u.lc(7,N,3,0,"p",10),u.lc(8,v,3,0,"p",10),u.lc(9,w,3,0,"p",10),u.lc(10,C,3,0,"p",10),u.Mb(),u.Mb(),u.Mb()),2&e){var r=u.Xb(2);u.Ab(7),u.cc("ngIf",0!=r.oferta.aire),u.Ab(1),u.cc("ngIf",0!=r.oferta.musica),u.Ab(1),u.cc("ngIf",0!=r.oferta.asientos),u.Ab(1),u.cc("ngIf",0!=r.oferta.maleta)}}function O(e,t){if(1&e&&(u.Nb(0,"ion-row"),u.Nb(1,"ion-col",9),u.Nb(2,"ion-text",8),u.Nb(3,"h3"),u.mc(4,"Comentarios: "),u.Mb(),u.Mb(),u.Mb(),u.Nb(5,"ion-col",9),u.Nb(6,"ion-text"),u.Nb(7,"p"),u.mc(8),u.Mb(),u.Mb(),u.Mb(),u.Mb()),2&e){var r=u.Xb(2);u.Ab(8),u.nc(r.oferta.comentarios)}}function k(e,t){if(1&e){var r=u.Ob();u.Nb(0,"ion-col",16),u.Nb(1,"ion-chip",18),u.Vb("click",(function(){u.ic(r);var e=u.Xb().$implicit;return u.Xb(2).chatear(e)})),u.Nb(2,"ion-label"),u.mc(3,"Chat"),u.Mb(),u.Mb(),u.Mb()}}function A(e,t){if(1&e){var r=u.Ob();u.Nb(0,"ion-col",16),u.Nb(1,"ion-chip",18),u.Vb("click",(function(){u.ic(r);var e=u.Xb().$implicit;return u.Xb(2).aceptar(e.codOfertaConductor,e.idSignal)})),u.Nb(2,"ion-label"),u.mc(3,"Aceptar"),u.Mb(),u.Mb(),u.Mb()}}function _(e,t){if(1&e){var r=u.Ob();u.Nb(0,"ion-col",16),u.Nb(1,"ion-chip",19),u.Vb("click",(function(){u.ic(r);var e=u.Xb(),t=e.$implicit,o=e.index;return u.Xb(2).rechazar(t.codOfertaConductor,o)})),u.Nb(2,"ion-label"),u.mc(3,"Rechazar"),u.Mb(),u.Mb(),u.Mb()}}function I(e,t){if(1&e){var r=u.Ob();u.Nb(0,"ion-col",16),u.Nb(1,"ion-chip",20),u.Vb("click",(function(){return u.ic(r),u.Xb(3).calificar()})),u.Nb(2,"ion-label"),u.mc(3,"Calificar"),u.Mb(),u.Mb(),u.Mb()}}function R(e,t){if(1&e&&(u.Nb(0,"ion-row",15),u.Nb(1,"ion-col",16),u.Nb(2,"ion-label"),u.Nb(3,"p"),u.mc(4),u.Mb(),u.Nb(5,"p"),u.mc(6),u.Mb(),u.Mb(),u.Mb(),u.lc(7,k,4,0,"ion-col",17),u.lc(8,A,4,0,"ion-col",17),u.lc(9,_,4,0,"ion-col",17),u.lc(10,I,4,0,"ion-col",17),u.Mb()),2&e){var r=t.$implicit,o=u.Xb(2);u.Ab(4),u.nc(r.nombre),u.Ab(2),u.nc(r.valor),u.Ab(1),u.cc("ngIf",1==o.habilitarChat),u.Ab(1),u.cc("ngIf",0==o.habilitarChat),u.Ab(1),u.cc("ngIf",1==o.habilitarRechazar),u.Ab(1),u.cc("ngIf",1==o.habilitarChat)}}function j(e,t){if(1&e){var r=u.Ob();u.Nb(0,"ion-grid",6),u.Nb(1,"ion-row"),u.Nb(2,"ion-col",7),u.Nb(3,"ion-text"),u.Nb(4,"h3"),u.Nb(5,"ion-label",8),u.mc(6,"Origen:"),u.Mb(),u.mc(7),u.Mb(),u.Nb(8,"h3"),u.Nb(9,"ion-label",8),u.mc(10,"Destino:"),u.Mb(),u.mc(11),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(12,"ion-row"),u.Nb(13,"ion-col",9),u.Nb(14,"ion-text",8),u.Nb(15,"h3"),u.mc(16,"Tipo de servicio: "),u.Mb(),u.Mb(),u.Mb(),u.Nb(17,"ion-col",9),u.Nb(18,"ion-text"),u.lc(19,d,2,0,"h4",10),u.lc(20,h,2,0,"h4",10),u.lc(21,p,2,0,"h4",10),u.lc(22,m,2,0,"h4",10),u.Mb(),u.Mb(),u.Mb(),u.lc(23,M,9,2,"ion-row",10),u.lc(24,g,9,1,"ion-row",10),u.lc(25,x,11,4,"ion-row",10),u.lc(26,O,9,1,"ion-row",10),u.Nb(27,"ion-row"),u.Nb(28,"ion-col",11),u.Nb(29,"ion-text",8),u.Nb(30,"h1"),u.mc(31),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(32,"ion-grid"),u.Nb(33,"ion-row"),u.Nb(34,"ion-col",7),u.Nb(35,"ion-label"),u.Nb(36,"h1"),u.mc(37,"Conductores que aceptaron la oferta"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.lc(38,R,11,6,"ion-row",12),u.Mb(),u.Nb(39,"ion-row"),u.Nb(40,"ion-col",7),u.Nb(41,"ion-button",13),u.Vb("click",(function(){return u.ic(r),u.Xb().finalizarOferta()})),u.mc(42," Finalizar Oferta "),u.Mb(),u.Mb(),u.Mb(),u.Mb()}if(2&e){var o=u.Xb();u.Ab(7),u.oc(" ",o.oferta.origen,""),u.Ab(4),u.oc(" ",o.oferta.destino,""),u.Ab(8),u.cc("ngIf",1==o.oferta.codTipoServicio),u.Ab(1),u.cc("ngIf",2==o.oferta.codTipoServicio),u.Ab(1),u.cc("ngIf",3==o.oferta.codTipoServicio),u.Ab(1),u.cc("ngIf",4==o.oferta.codTipoServicio),u.Ab(1),u.cc("ngIf",null!=o.oferta.horaInicial||null!=o.oferta.horaFinal),u.Ab(1),u.cc("ngIf",null!=o.oferta.fecha),u.Ab(1),u.cc("ngIf",0!=o.oferta.aire||0!=o.oferta.musica||0!=o.oferta.sientos||0!=o.oferta.maleta),u.Ab(1),u.cc("ngIf",null!=o.oferta.comentarios),u.Ab(5),u.oc("$",o.oferta.tarifa,""),u.Ab(7),u.cc("ngForOf",o.conductores)}}var y,P,S,z=[{path:"",component:(y=function(){function e(t,r,o,n,a){_classCallCheck(this,e),this.usuarioService=t,this.modalCtrl=r,this.alertController=o,this.navCtrl=n,this.push=a,this.habilitarChat=!1,this.habilitarBoton=!0,this.habilitarRechazar=!0,this.ofertasAceptadas=[],this.conductores=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.cargarDatos()}},{key:"cargarDatos",value:function(){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.usuarioService.ofertaPasajero;case 2:this.oferta=e.sent,console.log(this.oferta),this.usuarioService.buscarOfertasAceptadas(this.oferta.idOfertaPasajero).subscribe((function(e){t.ofertasAceptadas=e.ofertas,t.ofertasAceptadas.forEach((function(e){t.usuarioService.datosUsuario(e.codConductor).subscribe((function(r){var o={nombre:r.usuario.nombre,codOfertaConductor:e.idConductorOfertaPasajero,valor:e.valor,aceptada:e.aceptada,idSignal:r.usuario.idSignal};t.habilitarChat=e.aceptada,t.conductores.push(o)}))}))}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"chatear",value:function(e){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:b.a,componentProps:{idOferta:e.codOfertaConductor,nombre:e.nombre}});case 2:return r=t.sent,t.next=5,r.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"aceptar",value:function(e,t){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,n=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({message:"Esta seguro que desea aceptar este conductor?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:function(r){return Object(c.__awaiter)(n,void 0,void 0,regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:this.usuarioService.actualizarConductorOfertaPasajero(e,{estado:!1,aceptada:!0})&&(this.habilitarChat=!0,this.habilitarRechazar=!1,o={oferta:this.oferta,lugar:"aceptar conductor"},JSON.stringify({mensaje:"El conductor aceptado su oferta",titulo:"Oferta Aceptada",idSignal:t}),n=JSON.stringify(o),console.log(n));case 1:case"end":return r.stop()}}),r,this)})))}}]});case 2:return o=r.sent,r.next=5,o.present();case 5:case"end":return r.stop()}}),r,this)})))}},{key:"rechazar",value:function(e,t){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,n=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({message:"Esta seguro que desea rechazar este conductor?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:function(r){return Object(c.__awaiter)(n,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:this.usuarioService.actualizarConductorOfertaPasajero(e,{estado:!0,aceptada:!1})&&this.ofertasAceptadas.splice(t,1);case 1:case"end":return r.stop()}}),r,this)})))}}]});case 2:return o=r.sent,r.next=5,o.present();case 5:case"end":return r.stop()}}),r,this)})))}},{key:"finalizarOferta",value:function(){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({message:"Esta seguro que desea terminar esta oferta?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:function(e){return Object(c.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.usuarioService.terminarOferta(this.oferta.idOfertaPasajero)&&this.navCtrl.navigateRoot("/principal",{animated:!0});case 1:case"end":return e.stop()}}),e,this)})))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"calificar",value:function(){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:s.a,componentProps:{conductor:!0,cod:this.oferta.usuario.idUsuario}});case 2:return t=e.sent,e.next=5,t.present();case 5:return e.next=7,t.onDidDismiss();case 7:case"end":return e.stop()}}),e,this)})))}}]),e}(),y.\u0275fac=function(e){return new(e||y)(u.Kb(l.a),u.Kb(a.ab),u.Kb(a.b),u.Kb(a.bb),u.Kb(f.a))},y.\u0275cmp=u.Eb({type:y,selectors:[["app-ver-oferta-pasajero"]],decls:10,vars:1,consts:[["color","#f77708"],["slot","start"],["defaultHref","/ofertas-pasajero"],["slot","end",1,"imagenIco"],["src","./assets/imagenes/logo1.png"],["fixed","",4,"ngIf"],["fixed",""],["size","12"],["color","primary"],["size","6"],[4,"ngIf"],["size","12",1,"aling-center"],["class","border",4,"ngFor","ngForOf"],["fill","outline","expand","full","shape","round",3,"click"],["name","checkmark-outline"],[1,"border"],["size","4"],["size","4",4,"ngIf"],["color","dark","mode","ios","outline","false",1,"color-blue",3,"click"],["color","dark","mode","ios","outline","false",1,"color-red",3,"click"],["color","dark","mode","ios","outline","false",1,"color-green",3,"click"]],template:function(e,t){1&e&&(u.Nb(0,"ion-header"),u.Nb(1,"ion-toolbar",0),u.Nb(2,"ion-buttons",1),u.Lb(3,"ion-back-button",2),u.Mb(),u.Nb(4,"ion-title"),u.mc(5,"Oferta Pasajero"),u.Mb(),u.Nb(6,"ion-buttons",3),u.Lb(7,"img",4),u.Mb(),u.Mb(),u.Mb(),u.Nb(8,"ion-content"),u.lc(9,j,43,12,"ion-grid",5),u.Mb()),2&e&&(u.Ab(9),u.cc("ngIf",t.oferta))},directives:[a.q,a.W,a.i,a.f,a.g,a.V,a.n,o.k,a.p,a.K,a.m,a.U,a.A,o.j,a.h,a.r,a.l],styles:[".bgcolor[_ngcontent-%COMP%]{background:#ccd1e0}.border[_ngcontent-%COMP%]{border:1px solid #4d4f50}ion-chip[_ngcontent-%COMP%]{background:#795df1}.color-blue[_ngcontent-%COMP%]{background:rgba(61,250,77,.69)}.color-red[_ngcontent-%COMP%]{background:rgba(255,4,4,.55)}"]}),y)}],X=((S=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ib({type:S}),S.\u0275inj=u.Hb({factory:function(e){return new(e||S)},imports:[[i.i.forChild(z)],i.i]}),S),E=((P=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ib({type:P}),P.\u0275inj=u.Hb({factory:function(e){return new(e||P)},imports:[[o.c,n.a,a.X,X]]}),P)}}]);