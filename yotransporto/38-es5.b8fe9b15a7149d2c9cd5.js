function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,o){for(var t=0;t<o.length;t++){var a=o[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,o,t){return o&&_defineProperties(e.prototype,o),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"t+IC":function(e,o,t){"use strict";t.r(o),t.d(o,"VerOfertaPageModule",(function(){return z}));var a=t("ofXK"),n=t("3Pt+"),r=t("TEn/"),i=t("tyNb"),c=t("fXoL"),b=t("mrSG"),s=t("ZJfK"),f=t("6gyQ"),l=t("on2l"),u=t("H+l1");function d(e,o){1&e&&(c.Nb(0,"h4"),c.mc(1,"Ciudad"),c.Mb())}function h(e,o){1&e&&(c.Nb(0,"h4"),c.mc(1,"Interurbano"),c.Mb())}function M(e,o){1&e&&(c.Nb(0,"h4"),c.mc(1,"Domicilio"),c.Mb())}function p(e,o){1&e&&(c.Nb(0,"h4"),c.mc(1,"Mercancia"),c.Mb())}function N(e,o){if(1&e&&(c.Nb(0,"ion-col",10),c.Nb(1,"ion-text",2),c.Nb(2,"h3"),c.Nb(3,"ion-label",2),c.mc(4,"Fecha de salida:"),c.Mb(),c.mc(5),c.Mb(),c.Mb(),c.Mb()),2&e){var t=c.Xb(2);c.Ab(5),c.oc(" ",t.oferta.oferta.fecha_salida,"")}}function m(e,o){if(1&e&&(c.Nb(0,"ion-col",10),c.Nb(1,"ion-text",2),c.Nb(2,"h3"),c.Nb(3,"ion-label",2),c.mc(4,"Hora de salida:"),c.Mb(),c.mc(5),c.Mb(),c.Mb(),c.Mb()),2&e){var t=c.Xb(2);c.Ab(5),c.oc(" ",t.oferta.oferta.hora_salida,"")}}function g(e,o){if(1&e&&(c.Nb(0,"ion-col",10),c.Nb(1,"ion-text",2),c.Nb(2,"h3"),c.Nb(3,"ion-label",2),c.mc(4,"Capacidad de carga:"),c.Mb(),c.mc(5),c.Mb(),c.Mb(),c.Mb()),2&e){var t=c.Xb(2);c.Ab(5),c.oc(" ",t.oferta.oferta.capacidadCarga,"")}}function v(e,o){if(1&e&&(c.Nb(0,"ion-col",10),c.Nb(1,"ion-text",2),c.Nb(2,"h3"),c.Nb(3,"ion-label",2),c.mc(4,"Cupo para pasajeros:"),c.Mb(),c.mc(5),c.Mb(),c.Mb(),c.Mb()),2&e){var t=c.Xb(2);c.Ab(5),c.oc(" ",t.oferta.oferta.cantPasajeros,"")}}function C(e,o){if(1&e&&(c.Nb(0,"ion-col",10),c.Nb(1,"ion-text",2),c.Nb(2,"h3"),c.Nb(3,"ion-label",2),c.mc(4,"paqueteria:"),c.Mb(),c.mc(5),c.Mb(),c.Mb(),c.Mb()),2&e){var t=c.Xb(2);c.Ab(5),c.oc(" ",t.oferta.oferta.paqueteriaMensajeria,"")}}function w(e,o){if(1&e&&(c.Nb(0,"ion-row"),c.Nb(1,"ion-col",6),c.Nb(2,"ion-text",2),c.Nb(3,"h3"),c.mc(4,"Comentarios: "),c.Mb(),c.Mb(),c.Mb(),c.Nb(5,"ion-col",6),c.Nb(6,"ion-text"),c.Nb(7,"p"),c.mc(8),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&e){var t=c.Xb(2);c.Ab(8),c.nc(t.oferta.oferta.comentarios)}}function A(e,o){1&e&&(c.Nb(0,"ion-col",5),c.Nb(1,"ion-text",11),c.Nb(2,"h4"),c.mc(3,"Debe esperar que el due\xf1o de la oferta acepte para que se habilite el chat"),c.Mb(),c.Mb(),c.Mb())}function x(e,o){if(1&e){var t=c.Ob();c.Nb(0,"ion-row"),c.Nb(1,"ion-col",1),c.Nb(2,"ion-list"),c.Nb(3,"ion-radio-group",12),c.Vb("ngModelChange",(function(e){return c.ic(t),c.Xb(2).valor=e})),c.Nb(4,"ion-item"),c.Nb(5,"ion-label"),c.mc(6),c.Mb(),c.Lb(7,"ion-radio",13),c.Mb(),c.Nb(8,"ion-item"),c.Nb(9,"ion-label"),c.mc(10,"contraoferta: $ "),c.Mb(),c.Nb(11,"ion-radio",14),c.Vb("ngModelChange",(function(e){return c.ic(t),c.Xb(2).contraoferta=e})),c.Mb(),c.Nb(12,"ion-input",15),c.Vb("ngModelChange",(function(e){return c.ic(t),c.Xb(2).contraoferta=e})),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb()}if(2&e){var a=c.Xb(2);c.Ab(3),c.cc("ngModel",a.valor),c.Ab(3),c.oc("Tarifa de la oferta: $ ",a.oferta.oferta.tarifa,""),c.Ab(1),c.dc("value",a.oferta.oferta.tarifa),c.Ab(4),c.cc("ngModel",a.contraoferta),c.Ab(1),c.cc("ngModel",a.contraoferta)}}function I(e,o){if(1&e&&(c.Nb(0,"ion-row"),c.Nb(1,"ion-col",1),c.Nb(2,"ion-item"),c.Nb(3,"ion-text",2),c.Nb(4,"h3"),c.mc(5),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&e){var t=c.Xb(2);c.Ab(5),c.oc("Tarifa de la oferta: $ ",t.oferta.oferta.tarifa,"")}}function k(e,o){if(1&e){var t=c.Ob();c.Nb(0,"ion-row"),c.Nb(1,"ion-col",10),c.Nb(2,"ion-button",16),c.Vb("click",(function(){return c.ic(t),c.Xb(2).aceptar()})),c.mc(3," Aceptar "),c.Mb(),c.Mb(),c.Mb()}if(2&e){var a=c.Xb(2);c.Ab(2),c.cc("disabled",a.habilitarBoton)}}function y(e,o){if(1&e){var t=c.Ob();c.Nb(0,"ion-row"),c.Nb(1,"ion-col",10),c.Nb(2,"ion-button",17),c.Vb("click",(function(){return c.ic(t),c.Xb(2).calificar()})),c.mc(3," Finalizar oferta "),c.Mb(),c.Mb(),c.Mb()}}function O(e,o){if(1&e){var t=c.Ob();c.Nb(0,"ion-grid"),c.Nb(1,"ion-row"),c.Nb(2,"ion-col",1),c.Nb(3,"ion-text"),c.Nb(4,"h3"),c.Nb(5,"ion-label",2),c.mc(6,"Conductor:"),c.Mb(),c.mc(7),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(8,"ion-row"),c.Nb(9,"ion-col",3),c.Nb(10,"ion-avatar"),c.Lb(11,"img",4),c.Mb(),c.Mb(),c.Nb(12,"ion-col",5),c.Nb(13,"ion-text"),c.Nb(14,"h3"),c.Nb(15,"ion-label",2),c.mc(16,"Origen:"),c.Mb(),c.mc(17),c.Mb(),c.Nb(18,"h3"),c.Nb(19,"ion-label",2),c.mc(20,"Destino:"),c.Mb(),c.mc(21),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(22,"ion-row"),c.Nb(23,"ion-col",6),c.Nb(24,"ion-text",2),c.Nb(25,"h3"),c.mc(26,"Tipo de servicio: "),c.Mb(),c.Mb(),c.Mb(),c.Nb(27,"ion-col",6),c.Nb(28,"ion-text"),c.lc(29,d,2,0,"h4",0),c.lc(30,h,2,0,"h4",0),c.lc(31,M,2,0,"h4",0),c.lc(32,p,2,0,"h4",0),c.Mb(),c.Mb(),c.Mb(),c.Nb(33,"ion-row"),c.lc(34,N,6,1,"ion-col",7),c.Mb(),c.Nb(35,"ion-row"),c.lc(36,m,6,1,"ion-col",7),c.Mb(),c.Nb(37,"ion-row"),c.lc(38,g,6,1,"ion-col",7),c.Mb(),c.Nb(39,"ion-row"),c.lc(40,v,6,1,"ion-col",7),c.Mb(),c.Nb(41,"ion-row"),c.lc(42,C,6,1,"ion-col",7),c.Mb(),c.lc(43,w,9,1,"ion-row",0),c.Nb(44,"ion-row"),c.Nb(45,"ion-col",3),c.Nb(46,"ion-button",8),c.Vb("click",(function(){return c.ic(t),c.Xb().chat()})),c.mc(47," chat "),c.Mb(),c.Mb(),c.lc(48,A,4,0,"ion-col",9),c.Mb(),c.lc(49,x,13,5,"ion-row",0),c.lc(50,I,6,1,"ion-row",0),c.lc(51,k,4,1,"ion-row",0),c.lc(52,y,4,0,"ion-row",0),c.Mb()}if(2&e){var a=c.Xb();c.Ab(7),c.oc("",a.oferta.usuario.nombre," "),c.Ab(4),c.ec("src","../../../assets/avatars/",a.oferta.usuario.foto,"",c.jc),c.Ab(6),c.oc(" ",a.oferta.oferta.origen,""),c.Ab(4),c.oc(" ",a.oferta.oferta.destino,""),c.Ab(8),c.cc("ngIf",1==a.oferta.oferta.codTipoServicio),c.Ab(1),c.cc("ngIf",2==a.oferta.oferta.codTipoServicio),c.Ab(1),c.cc("ngIf",3==a.oferta.oferta.codTipoServicio),c.Ab(1),c.cc("ngIf",4==a.oferta.oferta.codTipoServicio),c.Ab(2),c.cc("ngIf",""!=a.oferta.oferta.fecha_salida),c.Ab(2),c.cc("ngIf",""!=a.oferta.oferta.hora_salida),c.Ab(2),c.cc("ngIf",""!=a.oferta.oferta.capacidadCarga),c.Ab(2),c.cc("ngIf",""!=a.oferta.oferta.cantPasajeros),c.Ab(2),c.cc("ngIf",""!=a.oferta.oferta.paqueteriaMensajeria),c.Ab(1),c.cc("ngIf",""!=a.oferta.oferta.comentarios),c.Ab(3),c.cc("disabled",a.habilitarChat),c.Ab(2),c.cc("ngIf",0==a.aceptada),c.Ab(1),c.cc("ngIf","1"==a.desde),c.Ab(1),c.cc("ngIf","2"==a.desde),c.Ab(1),c.cc("ngIf","1"==a.desde),c.Ab(1),c.cc("ngIf","2"==a.desde)}}var _,X,j,P,S=((_=function(){function e(o,t,a,n,r){_classCallCheck(this,e),this.usuarioService=o,this.navCtrl=t,this.modalCtrl=a,this.alertController=n,this.push=r,this.aceptada=!1,this.habilitarChat=!0,this.habilitarBoton=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.oferta=this.usuarioService.ofertaConductor,console.log(this.oferta),this.valor=this.oferta.oferta.tarifa,"2"===this.desde&&(this.habilitarBoton=!0,this.oferta.completa.aceptada&&(this.habilitarChat=!1,this.aceptada=!0))}},{key:"aceptar",value:function(){return Object(b.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({message:"Esta seguro de aceptar esta oferta",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:function(){var e={codOfertaConductor:t.oferta.oferta.idOfertaConductor,valor:String(t.valor)};t.usuarioService.aceptarOferta(e).subscribe((function(e){t.habilitarBoton=!0}));var o={oferta:t.oferta.oferta,lugar:"aceptar oferta de conductor"};JSON.stringify({mensaje:"Un usuario a aceptado su oferta y esta a la espera de su confirmaci\xf3n",titulo:"Oferta Aceptada",idSignal:t.oferta.usuario.idSignal}),JSON.stringify(o)}}]});case 2:return o=e.sent,e.next=5,o.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"chat",value:function(){return Object(b.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"2"===this.desde&&(this.idPasajeroOfertaConductor=this.oferta.completa.idPasajeroOfertaConductor),e.next=3,this.modalCtrl.create({component:s.a,componentProps:{idOferta:this.idPasajeroOfertaConductor,nombre:this.oferta.usuario.nombre}});case 3:return o=e.sent,e.next=6,o.present();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"calificar",value:function(){return Object(b.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:f.a,componentProps:{conductor:!0,cod:this.oferta.usuario.idUsuario}});case 2:return o=e.sent,e.next=5,o.present();case 5:return e.next=7,o.onDidDismiss();case 7:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||_)(c.Kb(l.a),c.Kb(r.bb),c.Kb(r.ab),c.Kb(r.b),c.Kb(u.a))},_.\u0275cmp=c.Eb({type:_,selectors:[["app-oferta"]],inputs:{desde:"desde"},decls:1,vars:1,consts:[[4,"ngIf"],["size","12",1,"aling-center"],["color","secondary"],["size","4"],[3,"src"],["size","8"],["size","6"],["size","12",4,"ngIf"],["expand","block","shape","round",3,"disabled","click"],["size","8",4,"ngIf"],["size","12"],[1,"color-text"],["name","auto",3,"ngModel","ngModelChange"],["slot","start",3,"value"],["slot","start",3,"ngModel","ngModelChange"],["type","text","placeholder","Digite su contraoferta",3,"ngModel","ngModelChange"],["expand","full","shape","round",3,"disabled","click"],["expand","full","shape","round",3,"click"]],template:function(e,o){1&e&&c.lc(0,O,53,20,"ion-grid",0),2&e&&c.cc("ngIf",o.oferta)},directives:[a.k,r.p,r.K,r.m,r.U,r.A,r.e,r.h,r.B,r.G,r.gb,n.c,n.f,r.w,r.F,r.eb,r.v,r.hb],styles:[""]}),_),V=[{path:"",component:(X=function(){function e(o){_classCallCheck(this,e),this.activatedRoute=o}return _createClass(e,[{key:"ngOnInit",value:function(){this.desde=this.activatedRoute.snapshot.paramMap.get("from")}}]),e}(),X.\u0275fac=function(e){return new(e||X)(c.Kb(i.a))},X.\u0275cmp=c.Eb({type:X,selectors:[["app-ver-oferta"]],decls:10,vars:1,consts:[["color","#f77708"],["slot","start"],["defaultHref","/"],["slot","end",1,"imagenIco"],["src","./assets/imagenes/logo1.png"],[3,"desde"]],template:function(e,o){1&e&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar",0),c.Nb(2,"ion-buttons",1),c.Lb(3,"ion-back-button",2),c.Mb(),c.Nb(4,"ion-title"),c.mc(5,"Ver oferta"),c.Mb(),c.Nb(6,"ion-buttons",3),c.Lb(7,"img",4),c.Mb(),c.Mb(),c.Mb(),c.Nb(8,"ion-content"),c.Lb(9,"app-oferta",5),c.Mb()),2&e&&(c.Ab(9),c.cc("desde",o.desde))},directives:[r.q,r.W,r.i,r.f,r.g,r.V,r.n,S],styles:[".top-10[_ngcontent-%COMP%]{margin-top:10px}"]}),X)}],K=((j=function e(){_classCallCheck(this,e)}).\u0275mod=c.Ib({type:j}),j.\u0275inj=c.Hb({factory:function(e){return new(e||j)},imports:[[i.i.forChild(V)],i.i]}),j),T=t("j1ZV"),z=((P=function e(){_classCallCheck(this,e)}).\u0275mod=c.Ib({type:P}),P.\u0275inj=c.Hb({factory:function(e){return new(e||P)},imports:[[a.c,n.a,r.X,T.a,K]]}),P)}}]);