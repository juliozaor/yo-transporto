function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{qs0g:function(e,t,r){"use strict";r.r(t),r.d(t,"VerOfertaPasajeroPageModule",(function(){return S}));var o=r("ofXK"),n=r("3Pt+"),a=r("TEn/"),i=r("tyNb"),c=r("mrSG"),b=r("ZJfK"),s=r("fXoL"),u=r("on2l"),l=r("H+l1");function f(e,t){1&e&&(s.Nb(0,"h4"),s.mc(1,"Ciudad"),s.Mb())}function h(e,t){1&e&&(s.Nb(0,"h4"),s.mc(1,"Interurbano"),s.Mb())}function d(e,t){1&e&&(s.Nb(0,"h4"),s.mc(1,"Domicilio"),s.Mb())}function p(e,t){1&e&&(s.Nb(0,"h4"),s.mc(1,"Mercancia"),s.Mb())}function m(e,t){if(1&e&&(s.Nb(0,"ion-row"),s.Nb(1,"ion-col",7),s.Nb(2,"ion-text",6),s.Nb(3,"h4"),s.mc(4,"Recoger en el horario: "),s.Mb(),s.Mb(),s.Mb(),s.Nb(5,"ion-col",7),s.Nb(6,"ion-text"),s.Nb(7,"h4"),s.mc(8),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&e){var r=s.Xb(2);s.Ab(8),s.pc("",r.oferta.horaInicial," - ",r.oferta.horaFinal,"")}}function M(e,t){if(1&e&&(s.Nb(0,"ion-row"),s.Nb(1,"ion-col",7),s.Nb(2,"ion-text",6),s.Nb(3,"h4"),s.mc(4,"Fecha: "),s.Mb(),s.Mb(),s.Mb(),s.Nb(5,"ion-col",7),s.Nb(6,"ion-text"),s.Nb(7,"h4"),s.mc(8),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&e){var r=s.Xb(2);s.Ab(8),s.nc(r.oferta.fecha)}}function g(e,t){1&e&&(s.Nb(0,"p"),s.mc(1,"Aire acondicionado"),s.Mb())}function N(e,t){1&e&&(s.Nb(0,"p"),s.mc(1,"Musica"),s.Mb())}function v(e,t){1&e&&(s.Nb(0,"p"),s.mc(1,"Asientos para Bebe"),s.Mb())}function w(e,t){if(1&e&&(s.Nb(0,"ion-row"),s.Nb(1,"ion-col",7),s.Nb(2,"ion-text",6),s.Nb(3,"h3"),s.mc(4,"Requiero: "),s.Mb(),s.Mb(),s.Mb(),s.Nb(5,"ion-col",7),s.Nb(6,"ion-text"),s.lc(7,g,2,0,"p",8),s.lc(8,N,2,0,"p",8),s.lc(9,v,2,0,"p",8),s.Mb(),s.Mb(),s.Mb()),2&e){var r=s.Xb(2);s.Ab(7),s.cc("ngIf",0!=r.oferta.aire),s.Ab(1),s.cc("ngIf",0!=r.oferta.musica),s.Ab(1),s.cc("ngIf",0!=r.oferta.sientos)}}function C(e,t){if(1&e&&(s.Nb(0,"ion-row"),s.Nb(1,"ion-col",7),s.Nb(2,"ion-text",6),s.Nb(3,"h3"),s.mc(4,"Comentarios: "),s.Mb(),s.Mb(),s.Mb(),s.Nb(5,"ion-col",7),s.Nb(6,"ion-text"),s.Nb(7,"p"),s.mc(8),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&e){var r=s.Xb(2);s.Ab(8),s.nc(r.oferta.comentarios)}}function O(e,t){if(1&e){var r=s.Ob();s.Nb(0,"ion-col",13),s.Nb(1,"ion-chip",15),s.Vb("click",(function(){s.ic(r);var e=s.Xb().$implicit;return s.Xb(2).chatear(e)})),s.Nb(2,"ion-label"),s.mc(3,"Chat"),s.Mb(),s.Mb(),s.Mb()}}function x(e,t){if(1&e){var r=s.Ob();s.Nb(0,"ion-col",13),s.Nb(1,"ion-chip",15),s.Vb("click",(function(){s.ic(r);var e=s.Xb().$implicit;return s.Xb(2).aceptar(e.codOfertaConductor,e.idSignal)})),s.Nb(2,"ion-label"),s.mc(3,"Aceptar"),s.Mb(),s.Mb(),s.Mb()}}function A(e,t){if(1&e){var r=s.Ob();s.Nb(0,"ion-col",13),s.Nb(1,"ion-chip",16),s.Vb("click",(function(){s.ic(r);var e=s.Xb(),t=e.$implicit,o=e.index;return s.Xb(2).rechazar(t.codOfertaConductor,o)})),s.Nb(2,"ion-label"),s.mc(3,"Rechazar"),s.Mb(),s.Mb(),s.Mb()}}function k(e,t){if(1&e&&(s.Nb(0,"ion-row",12),s.Nb(1,"ion-col",13),s.Nb(2,"ion-label"),s.Nb(3,"p"),s.mc(4),s.Mb(),s.Nb(5,"p"),s.mc(6),s.Mb(),s.Mb(),s.Mb(),s.lc(7,O,4,0,"ion-col",14),s.lc(8,x,4,0,"ion-col",14),s.lc(9,A,4,0,"ion-col",14),s.Mb()),2&e){var r=t.$implicit,o=s.Xb(2);s.Ab(4),s.nc(r.nombre),s.Ab(2),s.nc(r.valor),s.Ab(1),s.cc("ngIf",1==o.habilitarChat),s.Ab(1),s.cc("ngIf",0==o.habilitarChat),s.Ab(1),s.cc("ngIf",1==o.habilitarRechazar)}}function _(e,t){if(1&e){var r=s.Ob();s.Nb(0,"ion-grid",4),s.Nb(1,"ion-row"),s.Nb(2,"ion-col",5),s.Nb(3,"ion-text"),s.Nb(4,"h3"),s.Nb(5,"ion-label",6),s.mc(6,"Origen:"),s.Mb(),s.mc(7),s.Mb(),s.Nb(8,"h3"),s.Nb(9,"ion-label",6),s.mc(10,"Destino:"),s.Mb(),s.mc(11),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(12,"ion-row"),s.Nb(13,"ion-col",7),s.Nb(14,"ion-text",6),s.Nb(15,"h3"),s.mc(16,"Tipo de servicio: "),s.Mb(),s.Mb(),s.Mb(),s.Nb(17,"ion-col",7),s.Nb(18,"ion-text"),s.lc(19,f,2,0,"h4",8),s.lc(20,h,2,0,"h4",8),s.lc(21,d,2,0,"h4",8),s.lc(22,p,2,0,"h4",8),s.Mb(),s.Mb(),s.Mb(),s.lc(23,m,9,2,"ion-row",8),s.lc(24,M,9,1,"ion-row",8),s.lc(25,w,10,3,"ion-row",8),s.lc(26,C,9,1,"ion-row",8),s.Nb(27,"ion-row"),s.Nb(28,"ion-col",9),s.Nb(29,"ion-text",6),s.Nb(30,"h1"),s.mc(31),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(32,"ion-grid"),s.Nb(33,"ion-row"),s.Nb(34,"ion-col",5),s.Nb(35,"ion-label"),s.Nb(36,"h1"),s.mc(37,"Conductores que aceptaron la oferta"),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.lc(38,k,10,5,"ion-row",10),s.Mb(),s.Nb(39,"ion-row"),s.Nb(40,"ion-col",5),s.Nb(41,"ion-button",11),s.Vb("click",(function(){return s.ic(r),s.Xb().finalizarOferta()})),s.mc(42," Finalizar Oferta "),s.Mb(),s.Mb(),s.Mb(),s.Mb()}if(2&e){var o=s.Xb();s.Ab(7),s.oc(" ",o.oferta.origen,""),s.Ab(4),s.oc(" ",o.oferta.destino,""),s.Ab(8),s.cc("ngIf",1==o.oferta.codTipoServicio),s.Ab(1),s.cc("ngIf",2==o.oferta.codTipoServicio),s.Ab(1),s.cc("ngIf",3==o.oferta.codTipoServicio),s.Ab(1),s.cc("ngIf",4==o.oferta.codTipoServicio),s.Ab(1),s.cc("ngIf",null!=o.oferta.horaInicial||null!=o.oferta.horaFinal),s.Ab(1),s.cc("ngIf",null!=o.oferta.fecha),s.Ab(1),s.cc("ngIf",0!=o.oferta.aire||0!=o.oferta.musica||0!=o.oferta.sientos),s.Ab(1),s.cc("ngIf",null!=o.oferta.comentarios),s.Ab(5),s.oc("$",o.oferta.tarifa,""),s.Ab(7),s.cc("ngForOf",o.conductores)}}var I,R,j,y=[{path:"",component:(I=function(){function e(t,r,o,n,a){_classCallCheck(this,e),this.usuarioService=t,this.modalCtrl=r,this.alertController=o,this.navCtrl=n,this.push=a,this.habilitarChat=!1,this.habilitarBoton=!0,this.habilitarRechazar=!0,this.ofertasAceptadas=[],this.conductores=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.cargarDatos()}},{key:"cargarDatos",value:function(){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.usuarioService.ofertaPasajero;case 2:this.oferta=e.sent,console.log(this.oferta),this.usuarioService.buscarOfertasAceptadas(this.oferta.idOfertaPasajero).subscribe((function(e){t.ofertasAceptadas=e.ofertas,t.ofertasAceptadas.forEach((function(e){t.usuarioService.datosUsuario(e.codConductor).subscribe((function(r){var o={nombre:r.usuario.nombre,codOfertaConductor:e.idConductorOfertaPasajero,valor:e.valor,aceptada:e.aceptada,idSignal:r.usuario.idSignal};t.habilitarChat=e.aceptada,t.conductores.push(o)}))}))}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"chatear",value:function(e){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:b.a,componentProps:{idOferta:e.codOfertaConductor,nombre:e.nombre}});case 2:return r=t.sent,t.next=5,r.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"aceptar",value:function(e,t){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,n=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({message:"Esta seguro que desea aceptar este conductor?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:function(r){return Object(c.__awaiter)(n,void 0,void 0,regeneratorRuntime.mark((function r(){var o,n,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:this.usuarioService.actualizarConductorOfertaPasajero(e,{estado:!1,aceptada:!0})&&(this.habilitarChat=!0,this.habilitarRechazar=!1,o={oferta:this.oferta,lugar:"aceptar conductor"},n=JSON.stringify({mensaje:"El conductor aceptado su oferta",titulo:"Oferta Aceptada",idSignal:t}),a=JSON.stringify(o),console.log(a),this.push.enviarNotificacion(n,a).subscribe((function(e){console.log(e)})));case 1:case"end":return r.stop()}}),r,this)})))}}]});case 2:return o=r.sent,r.next=5,o.present();case 5:case"end":return r.stop()}}),r,this)})))}},{key:"rechazar",value:function(e,t){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,n=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({message:"Esta seguro que desea rechazar este conductor?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:function(r){return Object(c.__awaiter)(n,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:this.usuarioService.actualizarConductorOfertaPasajero(e,{estado:!0,aceptada:!1})&&this.ofertasAceptadas.splice(t,1);case 1:case"end":return r.stop()}}),r,this)})))}}]});case 2:return o=r.sent,r.next=5,o.present();case 5:case"end":return r.stop()}}),r,this)})))}},{key:"finalizarOferta",value:function(){return Object(c.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({message:"Esta seguro que desea terminar esta oferta?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:function(e){return Object(c.__awaiter)(r,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.usuarioService.terminarOferta(this.oferta.idOfertaPasajero)&&this.navCtrl.navigateRoot("/principal",{animated:!0});case 1:case"end":return e.stop()}}),e,this)})))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}}]),e}(),I.\u0275fac=function(e){return new(e||I)(s.Kb(u.a),s.Kb(a.bb),s.Kb(a.b),s.Kb(a.cb),s.Kb(l.a))},I.\u0275cmp=s.Eb({type:I,selectors:[["app-ver-oferta-pasajero"]],decls:8,vars:1,consts:[["color","#f77708"],["slot","start"],["defaultHref","/ofertas-pasajero"],["fixed","",4,"ngIf"],["fixed",""],["size","12"],["color","primary"],["size","6"],[4,"ngIf"],["size","12",1,"aling-center"],["class","bgcolor border",4,"ngFor","ngForOf"],["fill","outline","expand","full","shape","round",3,"click"],[1,"bgcolor","border"],["size","4"],["size","4",4,"ngIf"],["color","dark","mode","ios","outline","false",1,"color-blue",3,"click"],["color","dark","mode","ios","outline","false",1,"color-red",3,"click"]],template:function(e,t){1&e&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar",0),s.Nb(2,"ion-buttons",1),s.Lb(3,"ion-back-button",2),s.Mb(),s.Nb(4,"ion-title"),s.mc(5,"Oferta Pasajero"),s.Mb(),s.Mb(),s.Mb(),s.Nb(6,"ion-content"),s.lc(7,_,43,12,"ion-grid",3),s.Mb()),2&e&&(s.Ab(7),s.cc("ngIf",t.oferta))},directives:[a.q,a.X,a.i,a.f,a.g,a.W,a.n,o.l,a.p,a.L,a.m,a.V,a.A,o.k,a.h,a.l],styles:[".bgcolor[_ngcontent-%COMP%]{background:#ccd1e0}.border[_ngcontent-%COMP%]{border:1px solid #4d4f50}ion-chip[_ngcontent-%COMP%]{background:#795df1}.color-blue[_ngcontent-%COMP%]{background:rgba(61,250,77,.69)}.color-red[_ngcontent-%COMP%]{background:rgba(255,4,4,.55)}"]}),I)}],P=((j=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ib({type:j}),j.\u0275inj=s.Hb({factory:function(e){return new(e||j)},imports:[[i.i.forChild(y)],i.i]}),j),S=((R=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ib({type:R}),R.\u0275inj=s.Hb({factory:function(e){return new(e||R)},imports:[[o.c,n.a,a.Y,P]]}),R)}}]);