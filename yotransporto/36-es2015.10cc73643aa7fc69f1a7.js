(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{qs0g:function(o,t,i){"use strict";i.r(t),i.d(t,"VerOfertaPasajeroPageModule",(function(){return P}));var c=i("ofXK"),e=i("3Pt+"),n=i("TEn/"),a=i("tyNb"),r=i("mrSG"),b=i("ZJfK"),s=i("6gyQ"),l=i("fXoL"),f=i("on2l"),u=i("H+l1");function d(o,t){1&o&&(l.Nb(0,"h4"),l.mc(1,"Ciudad"),l.Mb())}function h(o,t){1&o&&(l.Nb(0,"h4"),l.mc(1,"Interurbano"),l.Mb())}function M(o,t){1&o&&(l.Nb(0,"h4"),l.mc(1,"Domicilio"),l.Mb())}function p(o,t){1&o&&(l.Nb(0,"h4"),l.mc(1,"Mercancia"),l.Mb())}function N(o,t){if(1&o&&(l.Nb(0,"ion-row"),l.Nb(1,"ion-col",9),l.Nb(2,"ion-text",8),l.Nb(3,"h4"),l.mc(4,"Recoger en el horario: "),l.Mb(),l.Mb(),l.Mb(),l.Nb(5,"ion-col",9),l.Nb(6,"ion-text"),l.Nb(7,"h4"),l.mc(8),l.Mb(),l.Mb(),l.Mb(),l.Mb()),2&o){const o=l.Xb(2);l.Ab(8),l.pc("",o.oferta.horaInicial," - ",o.oferta.horaFinal,"")}}function m(o,t){if(1&o&&(l.Nb(0,"ion-row"),l.Nb(1,"ion-col",9),l.Nb(2,"ion-text",8),l.Nb(3,"h4"),l.mc(4,"Fecha: "),l.Mb(),l.Mb(),l.Mb(),l.Nb(5,"ion-col",9),l.Nb(6,"ion-text"),l.Nb(7,"h4"),l.mc(8),l.Mb(),l.Mb(),l.Mb(),l.Mb()),2&o){const o=l.Xb(2);l.Ab(8),l.nc(o.oferta.fecha)}}function g(o,t){1&o&&(l.Nb(0,"p"),l.Lb(1,"ion-icon",14),l.mc(2,"Aire acondicionado"),l.Mb())}function O(o,t){1&o&&(l.Nb(0,"p"),l.Lb(1,"ion-icon",14),l.mc(2,"Musica"),l.Mb())}function v(o,t){1&o&&(l.Nb(0,"p"),l.Lb(1,"ion-icon",14),l.mc(2,"Asientos para Bebe"),l.Mb())}function A(o,t){1&o&&(l.Nb(0,"p"),l.Lb(1,"ion-icon",14),l.mc(2,"Maletero"),l.Mb())}function C(o,t){if(1&o&&(l.Nb(0,"ion-row"),l.Nb(1,"ion-col",9),l.Nb(2,"ion-text",8),l.Nb(3,"h3"),l.mc(4,"Requiero: "),l.Mb(),l.Mb(),l.Mb(),l.Nb(5,"ion-col",9),l.Nb(6,"ion-text"),l.lc(7,g,3,0,"p",10),l.lc(8,O,3,0,"p",10),l.lc(9,v,3,0,"p",10),l.lc(10,A,3,0,"p",10),l.Mb(),l.Mb(),l.Mb()),2&o){const o=l.Xb(2);l.Ab(7),l.cc("ngIf",0!=o.oferta.aire),l.Ab(1),l.cc("ngIf",0!=o.oferta.musica),l.Ab(1),l.cc("ngIf",0!=o.oferta.asientos),l.Ab(1),l.cc("ngIf",0!=o.oferta.maleta)}}function w(o,t){if(1&o&&(l.Nb(0,"ion-row"),l.Nb(1,"ion-col",9),l.Nb(2,"ion-text",8),l.Nb(3,"h3"),l.mc(4,"Comentarios: "),l.Mb(),l.Mb(),l.Mb(),l.Nb(5,"ion-col",9),l.Nb(6,"ion-text"),l.Nb(7,"p"),l.mc(8),l.Mb(),l.Mb(),l.Mb(),l.Mb()),2&o){const o=l.Xb(2);l.Ab(8),l.nc(o.oferta.comentarios)}}function I(o,t){if(1&o){const o=l.Ob();l.Nb(0,"ion-col",16),l.Nb(1,"ion-chip",18),l.Vb("click",(function(){l.ic(o);const t=l.Xb().$implicit;return l.Xb(2).chatear(t)})),l.Nb(2,"ion-label"),l.mc(3,"Chat"),l.Mb(),l.Mb(),l.Mb()}}function j(o,t){if(1&o){const o=l.Ob();l.Nb(0,"ion-col",16),l.Nb(1,"ion-chip",18),l.Vb("click",(function(){l.ic(o);const t=l.Xb().$implicit;return l.Xb(2).aceptar(t.codOfertaConductor,t.idSignal)})),l.Nb(2,"ion-label"),l.mc(3,"Aceptar"),l.Mb(),l.Mb(),l.Mb()}}function x(o,t){if(1&o){const o=l.Ob();l.Nb(0,"ion-col",16),l.Nb(1,"ion-chip",19),l.Vb("click",(function(){l.ic(o);const t=l.Xb(),i=t.$implicit,c=t.index;return l.Xb(2).rechazar(i.codOfertaConductor,c)})),l.Nb(2,"ion-label"),l.mc(3,"Rechazar"),l.Mb(),l.Mb(),l.Mb()}}function y(o,t){if(1&o){const o=l.Ob();l.Nb(0,"ion-col",16),l.Nb(1,"ion-chip",20),l.Vb("click",(function(){return l.ic(o),l.Xb(3).calificar()})),l.Nb(2,"ion-label"),l.mc(3,"Calificar"),l.Mb(),l.Mb(),l.Mb()}}function _(o,t){if(1&o&&(l.Nb(0,"ion-row",15),l.Nb(1,"ion-col",16),l.Nb(2,"ion-label"),l.Nb(3,"p"),l.mc(4),l.Mb(),l.Nb(5,"p"),l.mc(6),l.Mb(),l.Mb(),l.Mb(),l.lc(7,I,4,0,"ion-col",17),l.lc(8,j,4,0,"ion-col",17),l.lc(9,x,4,0,"ion-col",17),l.lc(10,y,4,0,"ion-col",17),l.Mb()),2&o){const o=t.$implicit,i=l.Xb(2);l.Ab(4),l.nc(o.nombre),l.Ab(2),l.nc(o.valor),l.Ab(1),l.cc("ngIf",1==i.habilitarChat),l.Ab(1),l.cc("ngIf",0==i.habilitarChat),l.Ab(1),l.cc("ngIf",1==i.habilitarRechazar),l.Ab(1),l.cc("ngIf",1==i.habilitarChat)}}function k(o,t){if(1&o){const o=l.Ob();l.Nb(0,"ion-grid",6),l.Nb(1,"ion-row"),l.Nb(2,"ion-col",7),l.Nb(3,"ion-text"),l.Nb(4,"h3"),l.Nb(5,"ion-label",8),l.mc(6,"Origen:"),l.Mb(),l.mc(7),l.Mb(),l.Nb(8,"h3"),l.Nb(9,"ion-label",8),l.mc(10,"Destino:"),l.Mb(),l.mc(11),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Nb(12,"ion-row"),l.Nb(13,"ion-col",9),l.Nb(14,"ion-text",8),l.Nb(15,"h3"),l.mc(16,"Tipo de servicio: "),l.Mb(),l.Mb(),l.Mb(),l.Nb(17,"ion-col",9),l.Nb(18,"ion-text"),l.lc(19,d,2,0,"h4",10),l.lc(20,h,2,0,"h4",10),l.lc(21,M,2,0,"h4",10),l.lc(22,p,2,0,"h4",10),l.Mb(),l.Mb(),l.Mb(),l.lc(23,N,9,2,"ion-row",10),l.lc(24,m,9,1,"ion-row",10),l.lc(25,C,11,4,"ion-row",10),l.lc(26,w,9,1,"ion-row",10),l.Nb(27,"ion-row"),l.Nb(28,"ion-col",11),l.Nb(29,"ion-text",8),l.Nb(30,"h1"),l.mc(31),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Nb(32,"ion-grid"),l.Nb(33,"ion-row"),l.Nb(34,"ion-col",7),l.Nb(35,"ion-label"),l.Nb(36,"h1"),l.mc(37,"Conductores que aceptaron la oferta"),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.lc(38,_,11,6,"ion-row",12),l.Mb(),l.Nb(39,"ion-row"),l.Nb(40,"ion-col",7),l.Nb(41,"ion-button",13),l.Vb("click",(function(){return l.ic(o),l.Xb().finalizarOferta()})),l.mc(42," Finalizar Oferta "),l.Mb(),l.Mb(),l.Mb(),l.Mb()}if(2&o){const o=l.Xb();l.Ab(7),l.oc(" ",o.oferta.origen,""),l.Ab(4),l.oc(" ",o.oferta.destino,""),l.Ab(8),l.cc("ngIf",1==o.oferta.codTipoServicio),l.Ab(1),l.cc("ngIf",2==o.oferta.codTipoServicio),l.Ab(1),l.cc("ngIf",3==o.oferta.codTipoServicio),l.Ab(1),l.cc("ngIf",4==o.oferta.codTipoServicio),l.Ab(1),l.cc("ngIf",null!=o.oferta.horaInicial||null!=o.oferta.horaFinal),l.Ab(1),l.cc("ngIf",null!=o.oferta.fecha),l.Ab(1),l.cc("ngIf",0!=o.oferta.aire||0!=o.oferta.musica||0!=o.oferta.sientos||0!=o.oferta.maleta),l.Ab(1),l.cc("ngIf",null!=o.oferta.comentarios),l.Ab(5),l.oc("$",o.oferta.tarifa,""),l.Ab(7),l.cc("ngForOf",o.conductores)}}const S=[{path:"",component:(()=>{class o{constructor(o,t,i,c,e){this.usuarioService=o,this.modalCtrl=t,this.alertController=i,this.navCtrl=c,this.push=e,this.habilitarChat=!1,this.habilitarBoton=!0,this.habilitarRechazar=!0,this.ofertasAceptadas=[],this.conductores=[]}ngOnInit(){this.cargarDatos()}cargarDatos(){return Object(r.__awaiter)(this,void 0,void 0,(function*(){this.oferta=yield this.usuarioService.ofertaPasajero,console.log(this.oferta),this.usuarioService.buscarOfertasAceptadas(this.oferta.idOfertaPasajero).subscribe(o=>{this.ofertasAceptadas=o.ofertas,this.ofertasAceptadas.forEach(o=>{this.usuarioService.datosUsuario(o.codConductor).subscribe(t=>{const i={nombre:t.usuario.nombre,codOfertaConductor:o.idConductorOfertaPasajero,valor:o.valor,aceptada:o.aceptada,idSignal:t.usuario.idSignal};this.habilitarChat=o.aceptada,this.conductores.push(i)})})})}))}chatear(o){return Object(r.__awaiter)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:b.a,componentProps:{idOferta:o.codOfertaConductor,nombre:o.nombre}});yield t.present()}))}aceptar(o,t){return Object(r.__awaiter)(this,void 0,void 0,(function*(){const i=yield this.alertController.create({message:"Esta seguro que desea aceptar este conductor?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:i=>Object(r.__awaiter)(this,void 0,void 0,(function*(){if(this.usuarioService.actualizarConductorOfertaPasajero(o,{estado:!1,aceptada:!0})){this.habilitarChat=!0,this.habilitarRechazar=!1;const o={oferta:this.oferta,lugar:"aceptar conductor"},i=(JSON.stringify({mensaje:"El conductor aceptado su oferta",titulo:"Oferta Aceptada",idSignal:t}),JSON.stringify(o));console.log(i)}}))}]});yield i.present()}))}rechazar(o,t){return Object(r.__awaiter)(this,void 0,void 0,(function*(){const i=yield this.alertController.create({message:"Esta seguro que desea rechazar este conductor?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:i=>Object(r.__awaiter)(this,void 0,void 0,(function*(){this.usuarioService.actualizarConductorOfertaPasajero(o,{estado:!0,aceptada:!1})&&this.ofertasAceptadas.splice(t,1)}))}]});yield i.present()}))}finalizarOferta(){return Object(r.__awaiter)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({message:"Esta seguro que desea terminar esta oferta?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Aceptar",handler:o=>Object(r.__awaiter)(this,void 0,void 0,(function*(){this.usuarioService.terminarOferta(this.oferta.idOfertaPasajero)&&this.navCtrl.navigateRoot("/principal",{animated:!0})}))}]});yield o.present()}))}calificar(){return Object(r.__awaiter)(this,void 0,void 0,(function*(){const o=yield this.modalCtrl.create({component:s.a,componentProps:{conductor:!0,cod:this.oferta.usuario.idUsuario}});yield o.present(),yield o.onDidDismiss()}))}}return o.\u0275fac=function(t){return new(t||o)(l.Kb(f.a),l.Kb(n.ab),l.Kb(n.b),l.Kb(n.bb),l.Kb(u.a))},o.\u0275cmp=l.Eb({type:o,selectors:[["app-ver-oferta-pasajero"]],decls:10,vars:1,consts:[["color","#f77708"],["slot","start"],["defaultHref","/ofertas-pasajero"],["slot","end",1,"imagenIco"],["src","./assets/imagenes/logo1.png"],["fixed","",4,"ngIf"],["fixed",""],["size","12"],["color","primary"],["size","6"],[4,"ngIf"],["size","12",1,"aling-center"],["class","border",4,"ngFor","ngForOf"],["fill","outline","expand","full","shape","round",3,"click"],["name","checkmark-outline"],[1,"border"],["size","4"],["size","4",4,"ngIf"],["color","dark","mode","ios","outline","false",1,"color-blue",3,"click"],["color","dark","mode","ios","outline","false",1,"color-red",3,"click"],["color","dark","mode","ios","outline","false",1,"color-green",3,"click"]],template:function(o,t){1&o&&(l.Nb(0,"ion-header"),l.Nb(1,"ion-toolbar",0),l.Nb(2,"ion-buttons",1),l.Lb(3,"ion-back-button",2),l.Mb(),l.Nb(4,"ion-title"),l.mc(5,"Oferta Pasajero"),l.Mb(),l.Nb(6,"ion-buttons",3),l.Lb(7,"img",4),l.Mb(),l.Mb(),l.Mb(),l.Nb(8,"ion-content"),l.lc(9,k,43,12,"ion-grid",5),l.Mb()),2&o&&(l.Ab(9),l.cc("ngIf",t.oferta))},directives:[n.q,n.W,n.i,n.f,n.g,n.V,n.n,c.k,n.p,n.K,n.m,n.U,n.A,c.j,n.h,n.r,n.l],styles:[".bgcolor[_ngcontent-%COMP%]{background:#ccd1e0}.border[_ngcontent-%COMP%]{border:1px solid #4d4f50}ion-chip[_ngcontent-%COMP%]{background:#795df1}.color-blue[_ngcontent-%COMP%]{background:rgba(61,250,77,.69)}.color-red[_ngcontent-%COMP%]{background:rgba(255,4,4,.55)}"]}),o})()}];let z=(()=>{class o{}return o.\u0275mod=l.Ib({type:o}),o.\u0275inj=l.Hb({factory:function(t){return new(t||o)},imports:[[a.i.forChild(S)],a.i]}),o})(),P=(()=>{class o{}return o.\u0275mod=l.Ib({type:o}),o.\u0275inj=l.Hb({factory:function(t){return new(t||o)},imports:[[c.c,e.a,n.X,z]]}),o})()}}]);