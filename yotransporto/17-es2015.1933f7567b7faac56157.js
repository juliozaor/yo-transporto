(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{lsyW:function(i,o,t){"use strict";t.r(o),t.d(o,"ConductorPageModule",(function(){return V}));var e=t("ofXK"),n=t("3Pt+"),c=t("TEn/"),r=t("tyNb"),s=t("mrSG"),a=t("fXoL"),b=t("EnSQ"),l=t("on2l"),d=t("IbGY"),u=t("Bfh1"),f=t("GWIG");const h=["slides"],p=["lista"],m=["content"];function g(i,o){if(1&i&&a.Lb(0,"app-mapa",22),2&i){const i=a.Xb();a.cc("coords",i.coords)}}function M(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Ciudad"),a.Mb())}function v(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Interurbano"),a.Mb())}function N(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Domicilio"),a.Mb())}function A(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Mercancia"),a.Mb())}function w(i,o){if(1&i){const i=a.Ob();a.Nb(0,"div"),a.Nb(1,"ion-item",24),a.Vb("click",(function(){a.ic(i);const o=a.Xb().$implicit;return a.Xb().verOfertaPasajero(o)})),a.Nb(2,"ion-label"),a.lc(3,M,2,0,"h1",23),a.lc(4,v,2,0,"h1",23),a.lc(5,N,2,0,"h1",23),a.lc(6,A,2,0,"h1",23),a.Nb(7,"p"),a.mc(8),a.Mb(),a.Mb(),a.Nb(9,"ion-label",25),a.mc(10),a.Mb(),a.Mb(),a.Nb(11,"ion-item-options",26),a.Nb(12,"ion-item-option",27),a.Vb("click",(function(){a.ic(i);const o=a.Xb().$implicit;return a.Xb().favorite(o)})),a.Lb(13,"ion-icon",28),a.Mb(),a.Nb(14,"ion-item-option",29),a.Vb("click",(function(){a.ic(i);const o=a.Xb().$implicit;return a.Xb().share(o)})),a.Lb(15,"ion-icon",30),a.Mb(),a.Mb(),a.Nb(16,"ion-item-options",31),a.Nb(17,"ion-item-option",32),a.Vb("click",(function(){a.ic(i);const o=a.Xb().$implicit;return a.Xb().borrar(o)})),a.Lb(18,"ion-icon",33),a.Mb(),a.Mb(),a.Mb()}if(2&i){const i=a.Xb().$implicit;a.Ab(3),a.cc("ngIf","1"==i.oferta.codTipoServicio),a.Ab(1),a.cc("ngIf","2"==i.oferta.codTipoServicio),a.Ab(1),a.cc("ngIf","3"==i.oferta.codTipoServicio),a.Ab(1),a.cc("ngIf","4"==i.oferta.codTipoServicio),a.Ab(2),a.oc("Comentarios: ",i.oferta.comentarios,""),a.Ab(2),a.oc(" $: ",i.oferta.tarifa," ")}}function S(i,o){if(1&i&&(a.Nb(0,"ion-item-sliding"),a.lc(1,w,19,6,"div",23),a.Mb()),2&i){const i=o.$implicit,t=a.Xb();a.Ab(1),a.cc("ngIf",t.validar(i.oferta.createdAt,i.oferta.comentarios))}}function O(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Ciudad"),a.Mb())}function k(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Interurbano"),a.Mb())}function C(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Envio"),a.Mb())}function I(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Mercancia"),a.Mb())}function T(i,o){if(1&i){const i=a.Ob();a.Nb(0,"ion-item-sliding"),a.Nb(1,"ion-item",34),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().verOfertaConductor(t)})),a.Nb(2,"ion-label"),a.lc(3,O,2,0,"h1",23),a.lc(4,k,2,0,"h1",23),a.lc(5,C,2,0,"h1",23),a.lc(6,I,2,0,"h1",23),a.Nb(7,"p"),a.mc(8),a.Mb(),a.Nb(9,"p"),a.mc(10),a.Mb(),a.Nb(11,"p"),a.mc(12),a.Mb(),a.Mb(),a.Nb(13,"ion-label",25),a.mc(14),a.Mb(),a.Mb(),a.Nb(15,"ion-item-options",26),a.Nb(16,"ion-item-option",27),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().favorite(t)})),a.Lb(17,"ion-icon",28),a.Mb(),a.Nb(18,"ion-item-option",29),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().share(t)})),a.Lb(19,"ion-icon",30),a.Mb(),a.Mb(),a.Nb(20,"ion-item-options",31),a.Nb(21,"ion-item-option",32),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().borrar(t)})),a.Lb(22,"ion-icon",33),a.Mb(),a.Mb(),a.Mb()}if(2&i){const i=o.$implicit;a.Ab(3),a.cc("ngIf","1"==i.codTipoServicio),a.Ab(1),a.cc("ngIf","2"==i.codTipoServicio),a.Ab(1),a.cc("ngIf","3"==i.codTipoServicio),a.Ab(1),a.cc("ngIf","4"==i.codTipoServicio),a.Ab(2),a.oc("Origen: ",i.origen,""),a.Ab(2),a.oc("Destino: ",i.destino,""),a.Ab(2),a.oc("Comentarios: ",i.comentarios,""),a.Ab(2),a.oc(" $: ",i.tarifa," ")}}function j(i,o){if(1&i){const i=a.Ob();a.Nb(0,"ion-list",null,19),a.Nb(2,"ion-item",34),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().verOfertaAceptada(t)})),a.Nb(3,"ion-label"),a.Nb(4,"h1"),a.mc(5),a.Mb(),a.Nb(6,"p"),a.mc(7),a.Mb(),a.Nb(8,"p"),a.mc(9),a.Mb(),a.Nb(10,"p"),a.mc(11),a.Mb(),a.Nb(12,"p",35),a.mc(13),a.Mb(),a.Mb(),a.Mb(),a.Mb()}if(2&i){const i=o.$implicit;a.Ab(5),a.oc("Pasajero: ",i.usuario.nombre,""),a.Ab(2),a.oc("Origen: ",i.oferta.origen,""),a.Ab(2),a.oc("Destino: ",i.oferta.destino,""),a.Ab(2),a.oc("Comentarios: ",i.oferta.comentarios,""),a.Ab(2),a.oc("$: ",i.oferta.tarifa,"")}}const y=[{path:"",component:(()=>{class i{constructor(i,o,t,e,n,c,r,s){this.menuCtrl=i,this.dataService=o,this.toastCtrl=t,this.navCtrl=e,this.usuarioService=n,this.conductorService=c,this.geolocation=r,this.applicationRef=s,this.ofertas=[],this.ofertasPasajero=[],this.ofertasAceptadas=[],this.habilitado=!0}ngOnInit(){this.geolocation.getCurrentPosition().then(i=>{this.coords=`${i.coords.latitude},${i.coords.longitude}`}).catch(i=>{console.log("Error getting location",i)}),this.usuarioService.getUsuarioToken().then(i=>Object(s.__awaiter)(this,void 0,void 0,(function*(){this.usuario=yield i,yield this.cargarOfertas(!1,!0)})))}cargarOfertas(i,o=!1){return Object(s.__awaiter)(this,void 0,void 0,(function*(){this.conductorService.datosConductor(this.usuario.idUsuario).subscribe(t=>Object(s.__awaiter)(this,void 0,void 0,(function*(){let e=0;this.conductor=yield t.conductor,this.conductor.esInterUrbano&&(e=1),yield this.conductorService.ofertasPasajeros(e,this.usuario.idUsuario,this.conductor.ciudadOrigen,this.conductor.ciudadDestino,o).subscribe(o=>Object(s.__awaiter)(this,void 0,void 0,(function*(){yield this.ofertasPasajero.push(...o.ofertas),console.log(o),i&&(i.target.complete(),0===o.ofertas.length&&"recibidas"===this.tipo&&(this.habilitado=!1))})))}))),this.conductorService.buscarOfertasConductor(this.usuario.idUsuario,o).subscribe(o=>Object(s.__awaiter)(this,void 0,void 0,(function*(){yield this.ofertas.push(...o.ofertas),i&&(i.target.complete(),0===o.ofertas.length&&"ofertadas"===this.tipo&&(this.habilitado=!1))}))),this.conductorService.ofertasAceptadas(this.usuario.idUsuario,o).subscribe(o=>Object(s.__awaiter)(this,void 0,void 0,(function*(){yield this.ofertasAceptadas.push(...o.ofertas),i&&(i.target.complete(),0===o.ofertas.length&&"aceptadas"===this.tipo&&(this.habilitado=!1))})))}))}recargar(i){this.ofertasAceptadas=[],this.ofertas=[],this.ofertasPasajero=[],this.cargarOfertas(i,!0),this.habilitado=!0}toggleMenu(){this.menuCtrl.toggle()}ionViewDidEnter(){this.slides.lockSwipes(!0)}segmentChanged(i){const o=i.detail.value;return"recibidas"===o?(this.slides.lockSwipes(!1),this.slides.slideTo(0),this.slides.lockSwipes(!0),this.content.scrollToTop(),void(this.tipo="recibidas")):"ofertadas"===o?(this.slides.lockSwipes(!1),this.slides.slideTo(1),this.slides.lockSwipes(!0),this.content.scrollToTop(),void(this.tipo="ofertadas")):(this.slides.lockSwipes(!1),this.slides.slideTo(2),this.slides.lockSwipes(!0),this.content.scrollToTop(),void(this.tipo="aceptadas"))}presentToast(i){return Object(s.__awaiter)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:i,duration:2e3})).present()}))}favorite(i){this.presentToast("Guardo en favoritos"),this.lista.closeSlidingItems()}share(i){this.presentToast("Compartido"),this.lista.closeSlidingItems()}borrar(i){this.presentToast("Borrado"),this.lista.closeSlidingItems()}verOfertaConductor(i){this.conductorService.ofertaConductor=i,this.navCtrl.navigateRoot("/ver-oferta-conductor",{animated:!0})}verOfertaPasajero(i){this.conductorService.ofertaPasajero=i,this.navCtrl.navigateRoot("/ver-oferta-conductor-pasajero/1",{animated:!0})}verOfertaAceptada(i){this.conductorService.ofertaPasajero=i,console.log(i),this.navCtrl.navigateRoot("/ver-oferta-conductor-pasajero/2",{animated:!0})}validar(i,o){let t=new Date,e=new Date(i);return e.setMinutes(e.getMinutes()+120),console.log(o," : ",t.getTime()," , ",e.getTime()),t.getTime()<e.getTime()?(console.log("se va a mostrar"),!0):(console.log("No se va a mostrar"),!1)}}return i.\u0275fac=function(o){return new(o||i)(a.Kb(c.Z),a.Kb(b.a),a.Kb(c.ib),a.Kb(c.bb),a.Kb(l.a),a.Kb(d.a),a.Kb(u.a),a.Kb(a.g))},i.\u0275cmp=a.Eb({type:i,selectors:[["app-conductor"]],viewQuery:function(i,o){var t;1&i&&(a.qc(h,!0),a.qc(p,!0),a.qc(m,!0)),2&i&&(a.gc(t=a.Wb())&&(o.slides=t.first),a.gc(t=a.Wb())&&(o.lista=t.first),a.gc(t=a.Wb())&&(o.content=t.first))},decls:50,vars:6,consts:[[1,"ion-no-border"],["color","#f77708"],["slot","start",3,"click"],["menu","primerMenu","color","#ffffff"],["slot","end",1,"imagenIco"],["src","./assets/imagenes/logo1.png"],[1,"ion-padding",3,"scrollEvents"],["content",""],["fixed",""],["size","12"],["lugar","conductor",3,"coords",4,"ngIf"],["color","tertiary","value","recibidas",3,"ionChange"],["value","recibidas"],["value","ofertadas"],["value","aceptadas"],["slot","fixed","pullFactor","0.8","pullMin","60","pullMax","120",3,"ionRefresh"],["refresh",""],["mode","ios","pager","false","scrollbar","ios"],["slides",""],["lista",""],[4,"ngFor","ngForOf"],["threshold","150px","position","bottom",3,"disabled","ionInfinite"],["lugar","conductor",3,"coords"],[4,"ngIf"],["color","light",3,"click"],["slot","end",1,"ion-text-right"],["side","start"],[3,"click"],["slot","icon-only","name","heart"],["color","secondary",3,"click"],["slot","icon-only","name","share"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"],["color","medium",3,"click"],[1,"ion-text-right"]],template:function(i,o){1&i&&(a.Nb(0,"ion-header",0),a.Nb(1,"ion-toolbar",1),a.Nb(2,"ion-buttons",2),a.Vb("click",(function(){return o.toggleMenu()})),a.Lb(3,"ion-menu-button",3),a.Mb(),a.Nb(4,"ion-title"),a.mc(5,"Solicitudes"),a.Mb(),a.Nb(6,"ion-buttons",4),a.Lb(7,"img",5),a.Mb(),a.Mb(),a.Mb(),a.Nb(8,"ion-content",6,7),a.Nb(10,"ion-grid",8),a.Nb(11,"ion-row"),a.Nb(12,"ion-col",9),a.lc(13,g,1,1,"app-mapa",10),a.Mb(),a.Mb(),a.Mb(),a.Nb(14,"ion-segment",11),a.Vb("ionChange",(function(i){return o.segmentChanged(i)})),a.Nb(15,"ion-segment-button",12),a.Nb(16,"ion-label"),a.mc(17,"Recibidas"),a.Mb(),a.Mb(),a.Nb(18,"ion-segment-button",13),a.Nb(19,"ion-label"),a.mc(20,"Ofertadas"),a.Mb(),a.Mb(),a.Nb(21,"ion-segment-button",14),a.Nb(22,"ion-label"),a.mc(23,"Aceptadas"),a.Mb(),a.Mb(),a.Mb(),a.Nb(24,"ion-refresher",15,16),a.Vb("ionRefresh",(function(i){return o.recargar(i)})),a.Lb(26,"ion-refresher-content"),a.Mb(),a.Nb(27,"ion-slides",17,18),a.Nb(29,"ion-slide"),a.Nb(30,"ion-grid",8),a.Nb(31,"ion-row"),a.Nb(32,"ion-col",9),a.Nb(33,"ion-list",null,19),a.lc(35,S,2,1,"ion-item-sliding",20),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(36,"ion-slide"),a.Nb(37,"ion-grid",8),a.Nb(38,"ion-row"),a.Nb(39,"ion-col",9),a.Nb(40,"ion-list",null,19),a.lc(42,T,23,8,"ion-item-sliding",20),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(43,"ion-slide"),a.Nb(44,"ion-grid",8),a.Nb(45,"ion-row"),a.Nb(46,"ion-col",9),a.lc(47,j,14,5,"ion-list",20),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(48,"ion-infinite-scroll",21),a.Vb("ionInfinite",(function(i){return o.cargarOfertas(i)})),a.Lb(49,"ion-infinite-scroll-content"),a.Mb(),a.Mb()),2&i&&(a.Ab(8),a.cc("scrollEvents",!0),a.Ab(5),a.cc("ngIf",o.coords),a.Ab(22),a.cc("ngForOf",o.ofertasPasajero),a.Ab(7),a.cc("ngForOf",o.ofertas),a.Ab(5),a.cc("ngForOf",o.ofertasAceptadas),a.Ab(1),a.cc("disabled",!o.habilitado))},directives:[c.q,c.W,c.i,c.D,c.V,c.n,c.p,c.K,c.m,e.k,c.L,c.gb,c.M,c.A,c.H,c.I,c.Q,c.P,c.B,e.j,c.t,c.u,f.a,c.z,c.w,c.y,c.x,c.r],styles:[".text-center[_ngcontent-%COMP%]{text-align:center}"]}),i})()}];let X=(()=>{class i{}return i.\u0275mod=a.Ib({type:i}),i.\u0275inj=a.Hb({factory:function(o){return new(o||i)},imports:[[r.i.forChild(y)],r.i]}),i})();var $=t("j1ZV");let V=(()=>{class i{}return i.\u0275mod=a.Ib({type:i}),i.\u0275inj=a.Hb({factory:function(o){return new(o||i)},imports:[[e.c,n.a,c.X,$.a,X]]}),i})()}}]);