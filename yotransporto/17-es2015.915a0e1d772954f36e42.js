(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{lsyW:function(i,o,t){"use strict";t.r(o),t.d(o,"ConductorPageModule",(function(){return _}));var e=t("ofXK"),n=t("3Pt+"),c=t("TEn/"),r=t("tyNb"),s=t("mrSG"),a=t("fXoL"),b=t("EnSQ"),l=t("on2l"),d=t("IbGY"),u=t("Bfh1"),f=t("GWIG");const h=["slides"],p=["lista"],m=["content"];function g(i,o){if(1&i&&a.Lb(0,"app-mapa",20),2&i){const i=a.Xb();a.cc("coords",i.coords)}}function M(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Ciudad"),a.Mb())}function v(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Interurbano"),a.Mb())}function N(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Domicilio"),a.Mb())}function A(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Mercancia"),a.Mb())}function S(i,o){if(1&i){const i=a.Ob();a.Nb(0,"ion-item-sliding"),a.Nb(1,"ion-item",21),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().verOfertaPasajero(t)})),a.Nb(2,"ion-label"),a.lc(3,M,2,0,"h1",22),a.lc(4,v,2,0,"h1",22),a.lc(5,N,2,0,"h1",22),a.lc(6,A,2,0,"h1",22),a.Nb(7,"p"),a.mc(8),a.Mb(),a.Mb(),a.Nb(9,"ion-label",23),a.mc(10),a.Mb(),a.Mb(),a.Nb(11,"ion-item-options",24),a.Nb(12,"ion-item-option",25),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().favorite(t)})),a.Lb(13,"ion-icon",26),a.Mb(),a.Nb(14,"ion-item-option",27),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().share(t)})),a.Lb(15,"ion-icon",28),a.Mb(),a.Mb(),a.Nb(16,"ion-item-options",29),a.Nb(17,"ion-item-option",30),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().borrar(t)})),a.Lb(18,"ion-icon",31),a.Mb(),a.Mb(),a.Mb()}if(2&i){const i=o.$implicit;a.Ab(3),a.cc("ngIf","1"==i.oferta.codTipoServicio),a.Ab(1),a.cc("ngIf","2"==i.oferta.codTipoServicio),a.Ab(1),a.cc("ngIf","3"==i.oferta.codTipoServicio),a.Ab(1),a.cc("ngIf","4"==i.oferta.codTipoServicio),a.Ab(2),a.oc("Comentarios: ",i.oferta.comentarios,""),a.Ab(2),a.oc(" precio: ",i.oferta.tarifa," ")}}function O(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Ciudad"),a.Mb())}function w(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Interurbano"),a.Mb())}function k(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Envio"),a.Mb())}function y(i,o){1&i&&(a.Nb(0,"h1"),a.mc(1,"Mercancia"),a.Mb())}function C(i,o){if(1&i){const i=a.Ob();a.Nb(0,"ion-item-sliding"),a.Nb(1,"ion-item",32),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().verOfertaConductor(t)})),a.Nb(2,"ion-label"),a.lc(3,O,2,0,"h1",22),a.lc(4,w,2,0,"h1",22),a.lc(5,k,2,0,"h1",22),a.lc(6,y,2,0,"h1",22),a.Nb(7,"p"),a.mc(8),a.Mb(),a.Nb(9,"p"),a.mc(10),a.Mb(),a.Nb(11,"p"),a.mc(12),a.Mb(),a.Mb(),a.Nb(13,"ion-label",23),a.mc(14),a.Mb(),a.Mb(),a.Nb(15,"ion-item-options",24),a.Nb(16,"ion-item-option",25),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().favorite(t)})),a.Lb(17,"ion-icon",26),a.Mb(),a.Nb(18,"ion-item-option",27),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().share(t)})),a.Lb(19,"ion-icon",28),a.Mb(),a.Mb(),a.Nb(20,"ion-item-options",29),a.Nb(21,"ion-item-option",30),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().borrar(t)})),a.Lb(22,"ion-icon",31),a.Mb(),a.Mb(),a.Mb()}if(2&i){const i=o.$implicit;a.Ab(3),a.cc("ngIf","1"==i.codTipoServicio),a.Ab(1),a.cc("ngIf","2"==i.codTipoServicio),a.Ab(1),a.cc("ngIf","3"==i.codTipoServicio),a.Ab(1),a.cc("ngIf","4"==i.codTipoServicio),a.Ab(2),a.oc("Origen: ",i.origen,""),a.Ab(2),a.oc("Destino: ",i.destino,""),a.Ab(2),a.oc("Comentarios: ",i.comentarios,""),a.Ab(2),a.oc(" precio: ",i.tarifa," ")}}function I(i,o){if(1&i){const i=a.Ob();a.Nb(0,"ion-list",null,17),a.Nb(2,"ion-item",32),a.Vb("click",(function(){a.ic(i);const t=o.$implicit;return a.Xb().verOfertaAceptada(t)})),a.Nb(3,"ion-label"),a.Nb(4,"h1"),a.mc(5),a.Mb(),a.Nb(6,"p"),a.mc(7),a.Mb(),a.Nb(8,"p"),a.mc(9),a.Mb(),a.Nb(10,"p"),a.mc(11),a.Mb(),a.Nb(12,"p",33),a.mc(13),a.Mb(),a.Mb(),a.Mb(),a.Mb()}if(2&i){const i=o.$implicit;a.Ab(5),a.oc("Pasajero: ",i.usuario.nombre,""),a.Ab(2),a.oc("Origen: ",i.oferta.origen,""),a.Ab(2),a.oc("Destino: ",i.oferta.destino,""),a.Ab(2),a.oc("Comentarios: ",i.oferta.comentarios,""),a.Ab(2),a.oc("precio: ",i.oferta.tarifa,"")}}const j=[{path:"",component:(()=>{class i{constructor(i,o,t,e,n,c,r,s){this.menuCtrl=i,this.dataService=o,this.toastCtrl=t,this.navCtrl=e,this.usuarioService=n,this.conductorService=c,this.geolocation=r,this.applicationRef=s,this.ofertas=[],this.ofertasPasajero=[],this.ofertasAceptadas=[],this.habilitado=!0}ngOnInit(){this.geolocation.getCurrentPosition().then(i=>{this.coords=`${i.coords.latitude},${i.coords.longitude}`,console.log(this.coords)}).catch(i=>{console.log("Error getting location",i)}),this.usuarioService.getUsuarioToken().then(i=>Object(s.__awaiter)(this,void 0,void 0,(function*(){this.usuario=yield i,yield this.cargarOfertas(!1)})))}cargarOfertas(i,o=!1){return Object(s.__awaiter)(this,void 0,void 0,(function*(){yield this.conductorService.datosConductor(this.usuario.idUsuario).subscribe(t=>Object(s.__awaiter)(this,void 0,void 0,(function*(){this.conductor=yield t.conductor;let e=0;this.conductor.esInterUrbano&&(e=1),yield this.conductorService.ofertasPasajeros(e,this.usuario.idUsuario,this.conductor.ciudadOrigen,this.conductor.ciudadDestino,o).subscribe(o=>Object(s.__awaiter)(this,void 0,void 0,(function*(){yield this.ofertasPasajero.push(...o.ofertas),i&&(i.target.complete(),0===o.ofertas.length&&"recibidas"===this.tipo&&(this.habilitado=!1))})))}))),yield this.conductorService.buscarOfertasConductor(this.usuario.idUsuario,o).subscribe(o=>Object(s.__awaiter)(this,void 0,void 0,(function*(){yield this.ofertas.push(...o.ofertas),i&&(console.log("entro al si",o.ofertas.length),i.target.complete(),0===o.ofertas.length&&"ofertadas"===this.tipo&&(this.habilitado=!1))}))),yield this.conductorService.ofertasAceptadas(this.usuario.idUsuario,o).subscribe(o=>Object(s.__awaiter)(this,void 0,void 0,(function*(){yield this.ofertasAceptadas.push(...o.ofertas),i&&(console.log("entro al si",o.ofertas.length),i.target.complete(),0===o.ofertas.length&&"aceptadas"===this.tipo&&(this.habilitado=!1))})))}))}recargar(i){this.ofertasAceptadas=[],this.ofertas=[],this.ofertasPasajero=[],this.cargarOfertas(i,!0),this.habilitado=!0}toggleMenu(){this.menuCtrl.toggle()}ionViewDidEnter(){this.slides.lockSwipes(!0)}segmentChanged(i){const o=i.detail.value;return console.log(o),"recibidas"===o?(this.slides.lockSwipes(!1),this.slides.slideTo(0),this.slides.lockSwipes(!0),this.content.scrollToTop(),void(this.tipo="recibidas")):"ofertadas"===o?(this.slides.lockSwipes(!1),this.slides.slideTo(1),this.slides.lockSwipes(!0),this.content.scrollToTop(),void(this.tipo="ofertadas")):(this.slides.lockSwipes(!1),this.slides.slideTo(2),this.slides.lockSwipes(!0),this.content.scrollToTop(),void(this.tipo="aceptadas"))}presentToast(i){return Object(s.__awaiter)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:i,duration:2e3})).present()}))}favorite(i){this.presentToast("Guardo en favoritos"),this.lista.closeSlidingItems()}share(i){this.presentToast("Compartido"),this.lista.closeSlidingItems()}borrar(i){this.presentToast("Borrado"),this.lista.closeSlidingItems()}verOfertaConductor(i){this.conductorService.ofertaConductor=i,this.navCtrl.navigateRoot("/ver-oferta-conductor",{animated:!0})}verOfertaPasajero(i){this.conductorService.ofertaPasajero=i,this.navCtrl.navigateRoot("/ver-oferta-conductor-pasajero/1",{animated:!0})}verOfertaAceptada(i){this.conductorService.ofertaPasajero=i,this.navCtrl.navigateRoot("/ver-oferta-conductor-pasajero/2",{animated:!0})}}return i.\u0275fac=function(o){return new(o||i)(a.Kb(c.ab),a.Kb(b.a),a.Kb(c.jb),a.Kb(c.cb),a.Kb(l.a),a.Kb(d.a),a.Kb(u.a),a.Kb(a.g))},i.\u0275cmp=a.Eb({type:i,selectors:[["app-conductor"]],viewQuery:function(i,o){var t;1&i&&(a.qc(h,!0),a.qc(p,!0),a.qc(m,!0)),2&i&&(a.gc(t=a.Wb())&&(o.slides=t.first),a.gc(t=a.Wb())&&(o.lista=t.first),a.gc(t=a.Wb())&&(o.content=t.first))},decls:45,vars:6,consts:[[1,"ion-no-border"],["color","#f77708"],["slot","start",3,"click"],["menu","primerMenu","color","primary"],[1,"ion-padding",3,"scrollEvents"],["content",""],["lugar","conductor",3,"coords",4,"ngIf"],["color","tertiary","value","recibidas",3,"ionChange"],["value","recibidas"],["value","ofertadas"],["value","aceptadas"],["slot","fixed","pullFactor","0.8","pullMin","60","pullMax","120",3,"ionRefresh"],["refresh",""],["mode","ios","pager","false","scrollbar","ios"],["slides",""],["fixed",""],["size","12"],["lista",""],[4,"ngFor","ngForOf"],["threshold","150px","position","bottom",3,"disabled","ionInfinite"],["lugar","conductor",3,"coords"],["color","light",3,"click"],[4,"ngIf"],["slot","end",1,"ion-text-right"],["side","start"],[3,"click"],["slot","icon-only","name","heart"],["color","secondary",3,"click"],["slot","icon-only","name","share"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"],["color","medium",3,"click"],[1,"ion-text-right"]],template:function(i,o){1&i&&(a.Nb(0,"ion-header",0),a.Nb(1,"ion-toolbar",1),a.Nb(2,"ion-buttons",2),a.Vb("click",(function(){return o.toggleMenu()})),a.Lb(3,"ion-menu-button",3),a.Mb(),a.Nb(4,"ion-title"),a.mc(5,"Solicitudes"),a.Mb(),a.Mb(),a.Mb(),a.Nb(6,"ion-content",4,5),a.lc(8,g,1,1,"app-mapa",6),a.Nb(9,"ion-segment",7),a.Vb("ionChange",(function(i){return o.segmentChanged(i)})),a.Nb(10,"ion-segment-button",8),a.Nb(11,"ion-label"),a.mc(12,"Recibidas"),a.Mb(),a.Mb(),a.Nb(13,"ion-segment-button",9),a.Nb(14,"ion-label"),a.mc(15,"Ofertadas"),a.Mb(),a.Mb(),a.Nb(16,"ion-segment-button",10),a.Nb(17,"ion-label"),a.mc(18,"Aceptadas"),a.Mb(),a.Mb(),a.Mb(),a.Nb(19,"ion-refresher",11,12),a.Vb("ionRefresh",(function(i){return o.recargar(i)})),a.Lb(21,"ion-refresher-content"),a.Mb(),a.Nb(22,"ion-slides",13,14),a.Nb(24,"ion-slide"),a.Nb(25,"ion-grid",15),a.Nb(26,"ion-row"),a.Nb(27,"ion-col",16),a.Nb(28,"ion-list",null,17),a.lc(30,S,19,6,"ion-item-sliding",18),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(31,"ion-slide"),a.Nb(32,"ion-grid",15),a.Nb(33,"ion-row"),a.Nb(34,"ion-col",16),a.Nb(35,"ion-list",null,17),a.lc(37,C,23,8,"ion-item-sliding",18),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(38,"ion-slide"),a.Nb(39,"ion-grid",15),a.Nb(40,"ion-row"),a.Nb(41,"ion-col",16),a.lc(42,I,14,5,"ion-list",18),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(43,"ion-infinite-scroll",19),a.Vb("ionInfinite",(function(i){return o.cargarOfertas(i)})),a.Lb(44,"ion-infinite-scroll-content"),a.Mb(),a.Mb()),2&i&&(a.Ab(6),a.cc("scrollEvents",!0),a.Ab(2),a.cc("ngIf",o.coords),a.Ab(22),a.cc("ngForOf",o.ofertasPasajero),a.Ab(7),a.cc("ngForOf",o.ofertas),a.Ab(5),a.cc("ngForOf",o.ofertasAceptadas),a.Ab(1),a.cc("disabled",!o.habilitado))},directives:[c.q,c.X,c.i,c.E,c.W,c.n,e.l,c.M,c.hb,c.N,c.A,c.I,c.J,c.R,c.Q,c.p,c.L,c.m,c.B,e.k,c.t,c.u,f.a,c.z,c.w,c.y,c.x,c.r],styles:[".text-center[_ngcontent-%COMP%]{text-align:center}"]}),i})()}];let T=(()=>{class i{}return i.\u0275mod=a.Ib({type:i}),i.\u0275inj=a.Hb({factory:function(o){return new(o||i)},imports:[[r.i.forChild(j)],r.i]}),i})();var V=t("j1ZV");let _=(()=>{class i{}return i.\u0275mod=a.Ib({type:i}),i.\u0275inj=a.Hb({factory:function(o){return new(o||i)},imports:[[e.c,n.a,c.Y,V.a,T]]}),i})()}}]);